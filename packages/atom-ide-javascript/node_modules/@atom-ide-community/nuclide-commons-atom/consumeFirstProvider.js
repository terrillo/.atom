"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = consumeFirstProvider;

/**
 * Copyright (c) 2017-present, Facebook, Inc.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree. An additional grant
 * of patent rights can be found in the PATENTS file in the same directory.
 *
 * 
 * @format
 */

/**
 * The module formerly known as "service-hub-plus". Provides a workaround for
 * https://github.com/atom/service-hub/issues/6
 */
function consumeFirstProvider(keyPath, version = '0.0.0') {
  return new Promise((resolve, reject) => {
    const subscription = atom.packages.serviceHub.consume(keyPath, version, provider => {
      process.nextTick(() => {
        resolve(provider);
        subscription.dispose();
      });
    });
  });
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL251Y2xpZGUvbnVjbGlkZS1jb21tb25zLWF0b20vY29uc3VtZUZpcnN0UHJvdmlkZXIuanMiXSwibmFtZXMiOlsiY29uc3VtZUZpcnN0UHJvdmlkZXIiLCJrZXlQYXRoIiwidmVyc2lvbiIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0Iiwic3Vic2NyaXB0aW9uIiwiYXRvbSIsInBhY2thZ2VzIiwic2VydmljZUh1YiIsImNvbnN1bWUiLCJwcm92aWRlciIsInByb2Nlc3MiLCJuZXh0VGljayIsImRpc3Bvc2UiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7Ozs7Ozs7Ozs7O0FBWUE7Ozs7QUFLZSxTQUFTQSxvQkFBVCxDQUNiQyxPQURhLEVBRWJDLE9BQWUsR0FBRyxPQUZMLEVBR0M7QUFDZCxTQUFPLElBQUlDLE9BQUosQ0FBWSxDQUFDQyxPQUFELEVBQVVDLE1BQVYsS0FBcUI7QUFDdEMsVUFBTUMsWUFBWSxHQUFHQyxJQUFJLENBQUNDLFFBQUwsQ0FBY0MsVUFBZCxDQUF5QkMsT0FBekIsQ0FDbkJULE9BRG1CLEVBRW5CQyxPQUZtQixFQUduQlMsUUFBUSxJQUFJO0FBQ1ZDLE1BQUFBLE9BQU8sQ0FBQ0MsUUFBUixDQUFpQixNQUFNO0FBQ3JCVCxRQUFBQSxPQUFPLENBQUNPLFFBQUQsQ0FBUDtBQUNBTCxRQUFBQSxZQUFZLENBQUNRLE9BQWI7QUFDRCxPQUhEO0FBSUQsS0FSa0IsQ0FBckI7QUFVRCxHQVhNLENBQVA7QUFZRCIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTctcHJlc2VudCwgRmFjZWJvb2ssIEluYy5cclxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuICpcclxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXHJcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxyXG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cclxuICpcclxuICogQGZsb3dcclxuICogQGZvcm1hdFxyXG4gKi9cclxuXHJcbi8qKlxyXG4gKiBUaGUgbW9kdWxlIGZvcm1lcmx5IGtub3duIGFzIFwic2VydmljZS1odWItcGx1c1wiLiBQcm92aWRlcyBhIHdvcmthcm91bmQgZm9yXHJcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9hdG9tL3NlcnZpY2UtaHViL2lzc3Vlcy82XHJcbiAqL1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gY29uc3VtZUZpcnN0UHJvdmlkZXIoXHJcbiAga2V5UGF0aDogc3RyaW5nLFxyXG4gIHZlcnNpb246IHN0cmluZyA9ICcwLjAuMCcsXHJcbik6IFByb21pc2U8YW55PiB7XHJcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgIGNvbnN0IHN1YnNjcmlwdGlvbiA9IGF0b20ucGFja2FnZXMuc2VydmljZUh1Yi5jb25zdW1lKFxyXG4gICAgICBrZXlQYXRoLFxyXG4gICAgICB2ZXJzaW9uLFxyXG4gICAgICBwcm92aWRlciA9PiB7XHJcbiAgICAgICAgcHJvY2Vzcy5uZXh0VGljaygoKSA9PiB7XHJcbiAgICAgICAgICByZXNvbHZlKHByb3ZpZGVyKTtcclxuICAgICAgICAgIHN1YnNjcmlwdGlvbi5kaXNwb3NlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0sXHJcbiAgICApO1xyXG4gIH0pO1xyXG59XHJcbiJdfQ==