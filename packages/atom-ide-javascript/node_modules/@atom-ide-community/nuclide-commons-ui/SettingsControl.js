"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = SettingsControl;

var _SettingsCheckbox = _interopRequireDefault(require("./SettingsCheckbox"));

var _SettingsInput = _interopRequireDefault(require("./SettingsInput"));

var _SettingsSelect = _interopRequireDefault(require("./SettingsSelect"));

var _SettingsColorInput = _interopRequireDefault(require("./SettingsColorInput"));

var _assert = _interopRequireDefault(require("assert"));

var React = _interopRequireWildcard(require("react"));

function _getRequireWildcardCache() { if (typeof WeakMap !== "function") return null; var cache = new WeakMap(); _getRequireWildcardCache = function () { return cache; }; return cache; }

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== "object" && typeof obj !== "function") { return { default: obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * Copyright (c) 2017-present, Facebook, Inc.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree. An additional grant
 * of patent rights can be found in the PATENTS file in the same directory.
 *
 * 
 * @format
 */
function SettingsControl(props) {
  const {
    keyPath,
    value,
    onChange,
    schema,
    title,
    hideDetails
  } = props;
  const {
    description: settingDescription
  } = schema;
  const description = hideDetails === true ? '' : settingDescription;

  if (schema) {
    if (schema.enum) {
      return (
        /*#__PURE__*/
        // $FlowFixMe(>=0.53.0) Flow suppress
        React.createElement(_SettingsSelect.default, {
          description: description,
          keyPath: keyPath,
          onChange: onChange,
          title: title,
          value: value
        })
      );
    } else if (schema.type === 'color') {
      return (
        /*#__PURE__*/
        // $FlowFixMe(>=0.53.0) Flow suppress
        React.createElement(_SettingsColorInput.default, {
          description: description,
          keyPath: keyPath,
          onChange: onChange,
          title: title,
          value: value
        })
      );
    } else if (isBoolean(value) || schema.type === 'boolean') {
      return (
        /*#__PURE__*/
        // $FlowFixMe(>=0.53.0) Flow suppress
        React.createElement(_SettingsCheckbox.default, {
          description: description,
          keyPath: keyPath,
          onChange: onChange,
          title: title,
          value: value
        })
      );
    } else if (Array.isArray(value) || schema.type === 'array') {
      if (isEditableArray(value)) {
        return (
          /*#__PURE__*/
          // $FlowFixMe(>=0.53.0) Flow suppress
          React.createElement(_SettingsInput.default, {
            description: description,
            keyPath: keyPath,
            onChange: onChange,
            title: title,
            value: value,
            type: "array"
          })
        );
      }
    } else if (isObject(value) || schema.type === 'object') {
      (0, _assert.default)(false); // Not implemented.
    } else {
      const type = isNumber(value) ? 'number' : 'string';
      return (
        /*#__PURE__*/
        // $FlowFixMe(>=0.53.0) Flow suppress
        React.createElement(_SettingsInput.default, {
          description: description,
          keyPath: keyPath,
          onChange: onChange,
          title: title,
          value: value,
          type: type
        })
      );
    }
  }

  return null;
}

function isBoolean(obj) {
  return obj === true || obj === false || toString.call(obj) === '[object Boolean]';
}

function isNumber(obj) {
  return toString.call(obj) === '[object Number]';
}

function isObject(obj) {
  const type = typeof obj;
  return type === 'function' || type === 'object' && Boolean(obj);
}

function isEditableArray(array) {
  for (let i = 0, len = array.length; i < len; i++) {
    const item = array[i];

    if (typeof item !== 'string') {
      return false;
    }
  }

  return true;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL251Y2xpZGUvbnVjbGlkZS1jb21tb25zLXVpL1NldHRpbmdzQ29udHJvbC5qcyJdLCJuYW1lcyI6WyJTZXR0aW5nc0NvbnRyb2wiLCJwcm9wcyIsImtleVBhdGgiLCJ2YWx1ZSIsIm9uQ2hhbmdlIiwic2NoZW1hIiwidGl0bGUiLCJoaWRlRGV0YWlscyIsImRlc2NyaXB0aW9uIiwic2V0dGluZ0Rlc2NyaXB0aW9uIiwiZW51bSIsInR5cGUiLCJpc0Jvb2xlYW4iLCJBcnJheSIsImlzQXJyYXkiLCJpc0VkaXRhYmxlQXJyYXkiLCJpc09iamVjdCIsImlzTnVtYmVyIiwib2JqIiwidG9TdHJpbmciLCJjYWxsIiwiQm9vbGVhbiIsImFycmF5IiwiaSIsImxlbiIsImxlbmd0aCIsIml0ZW0iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFZQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7Ozs7Ozs7QUFqQkE7Ozs7Ozs7Ozs7O0FBNEJlLFNBQVNBLGVBQVQsQ0FBeUJDLEtBQXpCLEVBQW1EO0FBQ2hFLFFBQU07QUFBQ0MsSUFBQUEsT0FBRDtBQUFVQyxJQUFBQSxLQUFWO0FBQWlCQyxJQUFBQSxRQUFqQjtBQUEyQkMsSUFBQUEsTUFBM0I7QUFBbUNDLElBQUFBLEtBQW5DO0FBQTBDQyxJQUFBQTtBQUExQyxNQUF5RE4sS0FBL0Q7QUFDQSxRQUFNO0FBQUNPLElBQUFBLFdBQVcsRUFBRUM7QUFBZCxNQUFvQ0osTUFBMUM7QUFFQSxRQUFNRyxXQUFXLEdBQUdELFdBQVcsS0FBSyxJQUFoQixHQUF1QixFQUF2QixHQUE0QkUsa0JBQWhEOztBQUVBLE1BQUlKLE1BQUosRUFBWTtBQUNWLFFBQUlBLE1BQU0sQ0FBQ0ssSUFBWCxFQUFpQjtBQUNmO0FBQUE7QUFDRTtBQUNBLDRCQUFDLHVCQUFEO0FBQ0UsVUFBQSxXQUFXLEVBQUVGLFdBRGY7QUFFRSxVQUFBLE9BQU8sRUFBRU4sT0FGWDtBQUdFLFVBQUEsUUFBUSxFQUFFRSxRQUhaO0FBSUUsVUFBQSxL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QUNoRCxVQUFNRyxJQUFJLEdBQUdKLEtBQUssQ0FBQ0MsQ0FBRCxDQUFsQjs7QUFDQSxRQUFJLE9BQU9HLElBQVAsS0FBZ0IsUUFBcEIsRUFBOEI7QUFDNUIsYUFBTyxLQUFQO0FBQ0Q7QUFDRjs7QUFDRCxTQUFPLElBQVA7QUFDRCIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTctcHJlc2VudCwgRmFjZWJvb2ssIEluYy5cclxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuICpcclxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXHJcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxyXG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cclxuICpcclxuICogQGZsb3dcclxuICogQGZvcm1hdFxyXG4gKi9cclxuXHJcbmltcG9ydCBTZXR0aW5nc0NoZWNrYm94IGZyb20gJy4vU2V0dGluZ3NDaGVja2JveCc7XHJcbmltcG9ydCBTZXR0aW5nc0lucHV0IGZyb20gJy4vU2V0dGluZ3NJbnB1dCc7XHJcbmltcG9ydCBTZXR0aW5nc1NlbGVjdCBmcm9tICcuL1NldHRpbmdzU2VsZWN0JztcclxuaW1wb3J0IFNldHRpbmdzQ29sb3JJbnB1dCBmcm9tICcuL1NldHRpbmdzQ29sb3JJbnB1dCc7XHJcbmltcG9ydCBpbnZhcmlhbnQgZnJvbSAnYXNzZXJ0JztcclxuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5cclxudHlwZSBQcm9wcyA9IHtcclxuICBrZXlQYXRoOiBzdHJpbmcsXHJcbiAgc2NoZW1hOiBhdG9tJENvbmZpZ1NjaGVtYSxcclxuICB2YWx1ZTogYW55LFxyXG4gIHRpdGxlOiA/c3RyaW5nLFxyXG4gIG9uQ2hhbmdlOiAodmFsdWU6IGFueSkgPT4gbWl4ZWQsXHJcbiAgaGlkZURldGFpbHM/OiBib29sZWFuLFxyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gU2V0dGluZ3NDb250cm9sKHByb3BzOiBQcm9wcyk6IFJlYWN0Lk5vZGUge1xyXG4gIGNvbnN0IHtrZXlQYXRoLCB2YWx1ZSwgb25DaGFuZ2UsIHNjaGVtYSwgdGl0bGUsIGhpZGVEZXRhaWxzfSA9IHByb3BzO1xyXG4gIGNvbnN0IHtkZXNjcmlwdGlvbjogc2V0dGluZ0Rlc2NyaXB0aW9ufSA9IHNjaGVtYTtcclxuXHJcbiAgY29uc3QgZGVzY3JpcHRpb24gPSBoaWRlRGV0YWlscyA9PT0gdHJ1ZSA/ICcnIDogc2V0dGluZ0Rlc2NyaXB0aW9uO1xyXG5cclxuICBpZiAoc2NoZW1hKSB7XHJcbiAgICBpZiAoc2NoZW1hLmVudW0pIHtcclxuICAgICAgcmV0dXJuIChcclxuICAgICAgICAvLyAkRmxvd0ZpeE1lKD49MC41My4wKSBGbG93IHN1cHByZXNzXHJcbiAgICAgICAgPFNldHRpbmdzU2VsZWN0XHJcbiAgICAgICAgICBkZXNjcmlwdGlvbj17ZGVzY3JpcHRpb259XHJcbiAgICAgICAgICBrZXlQYXRoPXtrZXlQYXRofVxyXG4gICAgICAgICAgb25DaGFuZ2U9e29uQ2hhbmdlfVxyXG4gICAgICAgICAgdGl0bGU9e3RpdGxlfVxyXG4gICAgICAgICAgdmFsdWU9e3ZhbHVlfVxyXG4gICAgICAgIC8+XHJcbiAgICAgICk7XHJcbiAgICB9IGVsc2UgaWYgKHNjaGVtYS50eXBlID09PSAnY29sb3InKSB7XHJcbiAgICAgIHJldHVybiAoXHJcbiAgICAgICAgLy8gJEZsb3dGaXhNZSg+PTAuNTMuMCkgRmxvdyBzdXBwcmVzc1xyXG4gICAgICAgIDxTZXR0aW5nc0NvbG9ySW5wdXRcclxuICAgICAgICAgIGRlc2NyaXB0aW9uPXtkZXNjcmlwdGlvbn1cclxuICAgICAgICAgIGtleVBhdGg9e2tleVBhdGh9XHJcbiAgICAgICAgICBvbkNoYW5nZT17b25DaGFuZ2V9XHJcbiAgICAgICAgICB0aXRsZT17dGl0bGV9XHJcbiAgICAgICAgICB2YWx1ZT17dmFsdWV9XHJcbiAgICAgICAgLz5cclxuICAgICAgKTtcclxuICAgIH0gZWxzZSBpZiAoaXNCb29sZWFuKHZhbHVlKSB8fCBzY2hlbWEudHlwZSA9PT0gJ2Jvb2xlYW4nKSB7XHJcbiAgICAgIHJldHVybiAoXHJcbiAgICAgICAgLy8gJEZsb3dGaXhNZSg+PTAuNTMuMCkgRmxvdyBzdXBwcmVzc1xyXG4gICAgICAgIDxTZXR0aW5nc0NoZWNrYm94XHJcbiAgICAgICAgICBkZXNjcmlwdGlvbj17ZGVzY3JpcHRpb259XHJcbiAgICAgICAgICBrZXlQYXRoPXtrZXlQYXRofVxyXG4gICAgICAgICAgb25DaGFuZ2U9e29uQ2hhbmdlfVxyXG4gICAgICAgICAgdGl0bGU9e3RpdGxlfVxyXG4gICAgICAgICAgdmFsdWU9e3ZhbHVlfVxyXG4gICAgICAgIC8+XHJcbiAgICAgICk7XHJcbiAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpIHx8IHNjaGVtYS50eXBlID09PSAnYXJyYXknKSB7XHJcbiAgICAgIGlmIChpc0VkaXRhYmxlQXJyYXkodmFsdWUpKSB7XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgIC8vICRGbG93Rml4TWUoPj0wLjUzLjApIEZsb3cgc3VwcHJlc3NcclxuICAgICAgICAgIDxTZXR0aW5nc0lucHV0XHJcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uPXtkZXNjcmlwdGlvbn1cclxuICAgICAgICAgICAga2V5UGF0aD17a2V5UGF0aH1cclxuICAgICAgICAgICAgb25DaGFuZ2U9e29uQ2hhbmdlfVxyXG4gICAgICAgICAgICB0aXRsZT17dGl0bGV9XHJcbiAgICAgICAgICAgIHZhbHVlPXt2YWx1ZX1cclxuICAgICAgICAgICAgdHlwZT1cImFycmF5XCJcclxuICAgICAgICAgIC8+XHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIGlmIChpc09iamVjdCh2YWx1ZSkgfHwgc2NoZW1hLnR5cGUgPT09ICdvYmplY3QnKSB7XHJcbiAgICAgIGludmFyaWFudChmYWxzZSk7IC8vIE5vdCBpbXBsZW1lbnRlZC5cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnN0IHR5cGUgPSBpc051bWJlcih2YWx1ZSkgPyAnbnVtYmVyJyA6ICdzdHJpbmcnO1xyXG4gICAgICByZXR1cm4gKFxyXG4gICAgICAgIC8vICRGbG93Rml4TWUoPj0wLjUzLjApIEZsb3cgc3VwcHJlc3NcclxuICAgICAgICA8U2V0dGluZ3NJbnB1dFxyXG4gICAgICAgICAgZGVzY3JpcHRpb249e2Rlc2NyaXB0aW9ufVxyXG4gICAgICAgICAga2V5UGF0aD17a2V5UGF0aH1cclxuICAgICAgICAgIG9uQ2hhbmdlPXtvbkNoYW5nZX1cclxuICAgICAgICAgIHRpdGxlPXt0aXRsZX1cclxuICAgICAgICAgIHZhbHVlPXt2YWx1ZX1cclxuICAgICAgICAgIHR5cGU9e3R5cGV9XHJcbiAgICAgICAgLz5cclxuICAgICAgKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJldHVybiBudWxsO1xyXG59XHJcblxyXG5mdW5jdGlvbiBpc0Jvb2xlYW4ob2JqKSB7XHJcbiAgcmV0dXJuIChcclxuICAgIG9iaiA9PT0gdHJ1ZSB8fCBvYmogPT09IGZhbHNlIHx8IHRvU3RyaW5nLmNhbGwob2JqKSA9PT0gJ1tvYmplY3QgQm9vbGVhbl0nXHJcbiAgKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaXNOdW1iZXIob2JqKSB7XHJcbiAgcmV0dXJuIHRvU3RyaW5nLmNhbGwob2JqKSA9PT0gJ1tvYmplY3QgTnVtYmVyXSc7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGlzT2JqZWN0KG9iaikge1xyXG4gIGNvbnN0IHR5cGUgPSB0eXBlb2Ygb2JqO1xyXG4gIHJldHVybiB0eXBlID09PSAnZnVuY3Rpb24nIHx8ICh0eXBlID09PSAnb2JqZWN0JyAmJiBCb29sZWFuKG9iaikpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBpc0VkaXRhYmxlQXJyYXkoYXJyYXkpOiBib29sZWFuIHtcclxuICBmb3IgKGxldCBpID0gMCwgbGVuID0gYXJyYXkubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcclxuICAgIGNvbnN0IGl0ZW0gPSBhcnJheVtpXTtcclxuICAgIGlmICh0eXBlb2YgaXRlbSAhPT0gJ3N0cmluZycpIHtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gIH1cclxuICByZXR1cm4gdHJ1ZTtcclxufVxyXG4iXX0=