/**
 * Copyright (c) 2017-present, Facebook, Inc.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree. An additional grant
 * of patent rights can be found in the PATENTS file in the same directory.
 *
 * 
 * @format
 */
'use strict';
/* eslint nuclide-internal/no-commonjs: 0 */

const {
  Console
} = require('console');
/**
 * This should only be used in Atom test contexts!
 * Atom tests normally only display console output in the renderer devtools,
 * which makes debugging difficult in headless mode.
 * This overwrites global.console with a patched console that writes to both
 * the devtools and regular stdio.
 */


module.exports = function patchAtomConsole() {
  const mainConsole = new Console(process.stdout, process.stderr);
  const rendererConsole = global.console;
  const mergedConsole = {};
  Object.getOwnPropertyNames(rendererConsole).filter(prop => typeof rendererConsole[prop] === 'function').forEach(prop => {
    mergedConsole[prop] = typeof mainConsole[prop] === 'function' ? (...args) => {
      mainConsole[prop](...args);
      return rendererConsole[prop](...args);
    } : (...args) => rendererConsole[prop](...args);
  });
  global.console = mergedConsole;
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL251Y2xpZGUvbnVjbGlkZS1jb21tb25zL3BhdGNoLWF0b20tY29uc29sZS5qcyJdLCJuYW1lcyI6WyJDb25zb2xlIiwicmVxdWlyZSIsIm1vZHVsZSIsImV4cG9ydHMiLCJwYXRjaEF0b21Db25zb2xlIiwibWFpbkNvbnNvbGUiLCJwcm9jZXNzIiwic3Rkb3V0Iiwic3RkZXJyIiwicmVuZGVyZXJDb25zb2xlIiwiZ2xvYmFsIiwiY29uc29sZSIsIm1lcmdlZENvbnNvbGUiLCJPYmplY3QiLCJnZXRPd25Qcm9wZXJ0eU5hbWVzIiwiZmlsdGVyIiwicHJvcCIsImZvckVhY2giLCJhcmdzIl0sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7QUFXQTtBQUVBOztBQUVBLE1BQU07QUFBQ0EsRUFBQUE7QUFBRCxJQUFZQyxPQUFPLENBQUMsU0FBRCxDQUF6QjtBQUVBOzs7Ozs7Ozs7QUFPQUMsTUFBTSxDQUFDQyxPQUFQLEdBQWlCLFNBQVNDLGdCQUFULEdBQTRCO0FBQzNDLFFBQU1DLFdBQVcsR0FBRyxJQUFJTCxPQUFKLENBQVlNLE9BQU8sQ0FBQ0MsTUFBcEIsRUFBNEJELE9BQU8sQ0FBQ0UsTUFBcEMsQ0FBcEI7QUFDQSxRQUFNQyxlQUFlLEdBQUdDLE1BQU0sQ0FBQ0MsT0FBL0I7QUFDQSxRQUFNQyxhQUFhLEdBQUcsRUFBdEI7QUFDQUMsRUFBQUEsTUFBTSxDQUFDQyxtQkFBUCxDQUEyQkwsZUFBM0IsRUFDR00sTUFESCxDQUNVQyxJQUFJLElBQUksT0FBT1AsZUFBZSxDQUFDTyxJQUFELENBQXRCLEtBQWlDLFVBRG5ELEVBRUdDLE9BRkgsQ0FFV0QsSUFBSSxJQUFJO0FBQ2ZKLElBQUFBLGFBQWEsQ0FBQ0ksSUFBRCxDQUFiLEdBQ0UsT0FBT1gsV0FBVyxDQUFDVyxJQUFELENBQWxCLEtBQTZCLFVBQTdCLEdBQ0ksQ0FBQyxHQUFHRSxJQUFKLEtBQWE7QUFDWGIsTUFBQUEsV0FBVyxDQUFDVyxJQUFELENBQVgsQ0FBa0IsR0FBR0UsSUFBckI7QUFDQSxhQUFPVCxlQUFlLENBQUNPLElBQUQsQ0FBZixDQUFzQixHQUFHRSxJQUF6QixDQUFQO0FBQ0QsS0FKTCxHQUtJLENBQUMsR0FBR0EsSUFBSixLQUFhVCxlQUFlLENBQUNPLElBQUQsQ0FBZixDQUFzQixHQUFHRSxJQUF6QixDQU5uQjtBQU9ELEdBVkg7QUFXQVIsRUFBQUEsTUFBTSxDQUFDQyxPQUFQLEdBQWlCQyxhQUFqQjtBQUNELENBaEJEIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENvcHlyaWdodCAoYykgMjAxNy1wcmVzZW50LCBGYWNlYm9vaywgSW5jLlxyXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG4gKlxyXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcclxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XHJcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxyXG4gKlxyXG4gKiBAbm9mbG93XHJcbiAqIEBmb3JtYXRcclxuICovXHJcbid1c2Ugc3RyaWN0JztcclxuXHJcbi8qIGVzbGludCBudWNsaWRlLWludGVybmFsL25vLWNvbW1vbmpzOiAwICovXHJcblxyXG5jb25zdCB7Q29uc29sZX0gPSByZXF1aXJlKCdjb25zb2xlJyk7XHJcblxyXG4vKipcclxuICogVGhpcyBzaG91bGQgb25seSBiZSB1c2VkIGluIEF0b20gdGVzdCBjb250ZXh0cyFcclxuICogQXRvbSB0ZXN0cyBub3JtYWxseSBvbmx5IGRpc3BsYXkgY29uc29sZSBvdXRwdXQgaW4gdGhlIHJlbmRlcmVyIGRldnRvb2xzLFxyXG4gKiB3aGljaCBtYWtlcyBkZWJ1Z2dpbmcgZGlmZmljdWx0IGluIGhlYWRsZXNzIG1vZGUuXHJcbiAqIFRoaXMgb3ZlcndyaXRlcyBnbG9iYWwuY29uc29sZSB3aXRoIGEgcGF0Y2hlZCBjb25zb2xlIHRoYXQgd3JpdGVzIHRvIGJvdGhcclxuICogdGhlIGRldnRvb2xzIGFuZCByZWd1bGFyIHN0ZGlvLlxyXG4gKi9cclxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBwYXRjaEF0b21Db25zb2xlKCkge1xyXG4gIGNvbnN0IG1haW5Db25zb2xlID0gbmV3IENvbnNvbGUocHJvY2Vzcy5zdGRvdXQsIHByb2Nlc3Muc3RkZXJyKTtcclxuICBjb25zdCByZW5kZXJlckNvbnNvbGUgPSBnbG9iYWwuY29uc29sZTtcclxuICBjb25zdCBtZXJnZWRDb25zb2xlID0ge307XHJcbiAgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMocmVuZGVyZXJDb25zb2xlKVxyXG4gICAgLmZpbHRlcihwcm9wID0+IHR5cGVvZiByZW5kZXJlckNvbnNvbGVbcHJvcF0gPT09ICdmdW5jdGlvbicpXHJcbiAgICAuZm9yRWFjaChwcm9wID0+IHtcclxuICAgICAgbWVyZ2VkQ29uc29sZVtwcm9wXSA9XHJcbiAgICAgICAgdHlwZW9mIG1haW5Db25zb2xlW3Byb3BdID09PSAnZnVuY3Rpb24nXHJcbiAgICAgICAgICA/ICguLi5hcmdzKSA9PiB7XHJcbiAgICAgICAgICAgICAgbWFpbkNvbnNvbGVbcHJvcF0oLi4uYXJncyk7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIHJlbmRlcmVyQ29uc29sZVtwcm9wXSguLi5hcmdzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgOiAoLi4uYXJncykgPT4gcmVuZGVyZXJDb25zb2xlW3Byb3BdKC4uLmFyZ3MpO1xyXG4gICAgfSk7XHJcbiAgZ2xvYmFsLmNvbnNvbGUgPSBtZXJnZWRDb25zb2xlO1xyXG59O1xyXG4iXX0=