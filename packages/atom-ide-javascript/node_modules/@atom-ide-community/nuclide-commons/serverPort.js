"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getAvailableServerPort = getAvailableServerPort;

var _net = _interopRequireDefault(require("net"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * Copyright (c) 2017-present, Facebook, Inc.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree. An additional grant
 * of patent rights can be found in the PATENTS file in the same directory.
 *
 * 
 * @format
 */
async function getAvailableServerPort() {
  return new Promise((resolve, reject) => {
    const server = _net.default.createServer();

    server.unref();
    server.on('error', reject);
    server.listen({
      port: 0
    }, () => {
      const port = server.address().port;
      server.close(() => {
        resolve(port);
      });
    });
  });
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL251Y2xpZGUvbnVjbGlkZS1jb21tb25zL3NlcnZlclBvcnQuanMiXSwibmFtZXMiOlsiZ2V0QXZhaWxhYmxlU2VydmVyUG9ydCIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0Iiwic2VydmVyIiwibmV0IiwiY3JlYXRlU2VydmVyIiwidW5yZWYiLCJvbiIsImxpc3RlbiIsInBvcnQiLCJhZGRyZXNzIiwiY2xvc2UiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFZQTs7OztBQVpBOzs7Ozs7Ozs7OztBQWNPLGVBQWVBLHNCQUFmLEdBQXlEO0FBQzlELFNBQU8sSUFBSUMsT0FBSixDQUFZLENBQUNDLE9BQUQsRUFBVUMsTUFBVixLQUFxQjtBQUN0QyxVQUFNQyxNQUFNLEdBQUdDLGFBQUlDLFlBQUosRUFBZjs7QUFDQUYsSUFBQUEsTUFBTSxDQUFDRyxLQUFQO0FBQ0FILElBQUFBLE1BQU0sQ0FBQ0ksRUFBUCxDQUFVLE9BQVYsRUFBbUJMLE1BQW5CO0FBQ0FDLElBQUFBLE1BQU0sQ0FBQ0ssTUFBUCxDQUFjO0FBQUNDLE1BQUFBLElBQUksRUFBRTtBQUFQLEtBQWQsRUFBeUIsTUFBTTtBQUM3QixZQUFNQSxJQUFJLEdBQUdOLE1BQU0sQ0FBQ08sT0FBUCxHQUFpQkQsSUFBOUI7QUFDQU4sTUFBQUEsTUFBTSxDQUFDUSxLQUFQLENBQWEsTUFBTTtBQUNqQlYsUUFBQUEsT0FBTyxDQUFDUSxJQUFELENBQVA7QUFDRCxPQUZEO0FBR0QsS0FMRDtBQU1ELEdBVk0sQ0FBUDtBQVdEIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENvcHlyaWdodCAoYykgMjAxNy1wcmVzZW50LCBGYWNlYm9vaywgSW5jLlxyXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG4gKlxyXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcclxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XHJcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxyXG4gKlxyXG4gKiBAZmxvdyBzdHJpY3RcclxuICogQGZvcm1hdFxyXG4gKi9cclxuXHJcbmltcG9ydCBuZXQgZnJvbSAnbmV0JztcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRBdmFpbGFibGVTZXJ2ZXJQb3J0KCk6IFByb21pc2U8bnVtYmVyPiB7XHJcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgIGNvbnN0IHNlcnZlciA9IG5ldC5jcmVhdGVTZXJ2ZXIoKTtcclxuICAgIHNlcnZlci51bnJlZigpO1xyXG4gICAgc2VydmVyLm9uKCdlcnJvcicsIHJlamVjdCk7XHJcbiAgICBzZXJ2ZXIubGlzdGVuKHtwb3J0OiAwfSwgKCkgPT4ge1xyXG4gICAgICBjb25zdCBwb3J0ID0gc2VydmVyLmFkZHJlc3MoKS5wb3J0O1xyXG4gICAgICBzZXJ2ZXIuY2xvc2UoKCkgPT4ge1xyXG4gICAgICAgIHJlc29sdmUocG9ydCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcbn1cclxuIl19