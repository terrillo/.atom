"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var DebugProtocol = _interopRequireWildcard(require("vscode-debugprotocol"));

var _VsAdapterSpawner = _interopRequireDefault(require("./VsAdapterSpawner"));

var _V8Protocol = _interopRequireDefault(require("./V8Protocol"));

var _rxjsCompatUmdMin = require("rxjs-compat/bundles/rxjs-compat.umd.min.js");

var _idx = _interopRequireDefault(require("idx"));

var _assert = _interopRequireDefault(require("assert"));

var _analytics = require("@atom-ide-community/nuclide-commons/analytics");

var _uuid = _interopRequireDefault(require("uuid"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _getRequireWildcardCache() { if (typeof WeakMap !== "function") return null; var cache = new WeakMap(); _getRequireWildcardCache = function () { return cache; }; return cache; }

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== "object" && typeof obj !== "function") { return { default: obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }

/**
 * Copyright (c) 2017-present, Facebook, Inc.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree. An additional grant
 * of patent rights can be found in the PATENTS file in the same directory.
 *
 * 
 * @format
 */
function raiseAdapterExitedEvent(exitCode) {
  return {
    seq: 0,
    type: 'event',
    event: 'adapter-exited',
    body: {
      exitCode
    }
  };
}

/**
 * Use V8 JSON-RPC protocol to send & receive messages
 * (requests, responses & events) over `stdio` of adapter child processes.
 */
class VsDebugSession extends _V8Protocol.default {
  constructor(id, logger, adapterExecutable, adapterAnalyticsExtras, spawner, sendPreprocessors = [], receivePreprocessors = [], runInTerminalHandler, isReadOnly = false) {
    super(id, logger, sendPreprocessors, receivePreprocessors);
    this._readyForBreakpoints = void 0;
    this._disconnected = void 0;
    this._adapterProcessSubscription = void 0;
    this._startTime = void 0;
    this.capabilities = void 0;
    this._adapterExecutable = void 0;
    this._spawner = void 0;
    this._adapterAnalyticsExtras = void 0;
    this._adapterErrorOutput = void 0;
    this._onDidInitialize = void 0;
    this._onDidStop = void 0;
    this._onDidContinued = void 0;
    this._onDidTerminateDebugee = void 0;
    this._onDidExitDebugee = void 0;
    this._onDidExitAdapter = void 0;
    this._onDidThread = void 0;
    this._onDidOutput = void 0;
    this._onDidBreakpoint = void 0;
    this._onDidModule = void 0;
    this._onDidLoadSource = void 0;
    this._onDidCustom = void 0;
    this._onDidEvent = void 0;
    this._onDidEvaluate = void 0;
    this._runInTerminalHandler = void 0;
    this._isReadOnly = void 0;
    this._adapterExecutable = adapterExecutable;
    this._readyForBreakpoints = false;
    this._spawner = spawner == null ? new _VsAdapterSpawner.default() : spawner;
    this._isReadOnly = isReadOnly;
    this._adapterAnalyticsExtras = { ...adapterAnalyticsExtras,
      // $FlowFixMe flow doesn't consider uuid callable, but it is
      debuggerSessionId: (0, _uuid.default)()
    };
    this._adapterErrorOutput = '';
    this._onDidInitialize = new _rxjsCompatUmdMin.Subject();
    this._onDidStop = new _rxjsCompatUmdMin.Subject();
    this._onDidContinued = new _rxjsCompatUmdMin.Subject();
    this._onDidTerminateDebugee = new _rxjsCompatUmdMin.Subject();
    this._onDidExitDebugee = new _rxjsCompatUmdMin.Subject();
    this._onDidExitAdapter = new _rxjsCompatUmdMin.Subject();
    this._onDidThread = new _rxjsCompatUmdMin.Subject();
    this._onDidOutput = new _rxjsCompatUmdMin.Subject();
    this._onDidBreakpoint = new _rxjsCompatUmdMin.Subject();
    this._onDidModule = new _rxjsCompatUmdMin.Subject();
    this._onDidLoadSource = new _rxjsCompatUmdMin.Subject();
    this._onDidCustom = new _rxjsCompatUmdMin.Subject();
    this._onDidEvent = new _rxjsCompatUmdMin.Subject();
    this._onDidEvaluate = new _rxjsCompatUmdMin.Subject();
    this.capabilities = {};
    this._runInTerminalHandler = runInTerminalHandler || null;
  }

  observeInitializeEvents() {
    return this._onDidInitialize.asObservable();
  }

  observeStopEvents() {
    return this._onDidStop.asObservable();
  }

  observeContinuedEvents() {
    return this._onDidContinued.asObservable();
  }

  observeTerminateDebugeeEvents() {
    return this._onDidTerminateDebugee.asObservable();
  }

  observeExitedDebugeeEvents() {
    return this._onDidExitDebugee.asObservable();
  }

  observeAdapterExitedEvents() {
    return this._onDidExitAdapter.asObservable();
  }

  observeThreadEvents() {
    return this._onDidThread.asObservable();
  }

  observeOutputEvents() {
    return this._onDidOutput.asObservable();
  }

  observeBreakpointEvents() {
    return this._onDidBreakpoint.asObservable();
  }

  observeModuleEvents() {
    return this._onDidModule.asObservable();
  }

  observeSourceLoadedEvents() {
    return this._onDidLoadSource.asObservable();
  }

  observeCustomEvents() {
    return this._onDidCustom.asObservable();
  }

  observeEvaluations() {
    return this._onDidEvaluate.asObservable();
  }

  observeAllEvents() {
    return this._onDidEvent.asObservable();
  }

  _initServer() {
    if (this._adapterProcessSubscription != null) {
      return;
    }

    this._startServer();

    this._startTime = new Date().getTime();
  }

  custom(request, args) {
    return this.send(request, args);
  }

  send(command, args) {
    this._initServer();

    const operation = () => {
      // Babel Bug: `super` isn't working with `async`
      return super.send(command, args).then(response => {
        const sanitizedResponse = this._sanitizeResponse(response);

        (0, _analytics.track)('vs-debug-session:transaction', { ...this._adapterAnalyticsExtras,
          request: {
            command,
            arguments: args
          },
          response: sanitizedResponse
        });
        return response;
      }, errorResponse => {
        var _errorResponse$body, _errorResponse$body$e;

        let errorMessage = null;
        let showUser = false;
        const errorFormatString = ((_errorResponse$body = errorResponse.body) === null || _errorResponse$body === void 0 ? void 0 : (_errorResponse$body$e = _errorResponse$body.error) === null || _errorResponse$body$e === void 0 ? void 0 : _errorResponse$body$e.format) || '';

        if (errorFormatString !== '') {
          const errorObject = errorResponse.body.error; // Protocol response contained an ErrorResponse with details
          // about how the debug adapter wants us to handle the error.

          errorMessage = String(errorFormatString);
          showUser = Boolean(errorObject.showUser);
          const variables = errorObject.variables;

          if (variables != null) {
            for (const key of Object.keys(variables)) {
              const pattern = new RegExp('{' + key + '}', 'g');
              errorMessage = errorMessage.replace(pattern, variables[key]);
            }
          } // TODO: Allow the consumer of the session to register a global
          // error handler routine so we can still present errors even
          // when running outside of Atom.


          if (Boolean(showUser) && typeof atom !== 'undefined') {
            atom.notifications.addError(errorMessage);
          }
        } else if (errorResponse.message != null) {
          // Response message contained a user-facing string to display.
          errorMessage = errorResponse.message;
        } else {
          var _errorResponse$body2;

          // See if Response message contained a user-facing string to display.
          // The protocol expects message to be on result, not result.body
          // but some debug adapters are doing this incorrectly. Work with
          // them anyway...
          // $FlowIgnore
          errorMessage = (_errorResponse$body2 = errorResponse.body) === null || _errorResponse$body2 === void 0 ? void 0 : _errorResponse$body2.message;
        }

        (0, _analytics.track)('vs-debug-session:transaction', { ...this._adapterAnalyticsExtras,
          request: {
            command,
            arguments: args
          },
          response: errorResponse
        });

        if (errorMessage != null) {
          throw new Error(errorMessage);
        } // If the debug adapter didn't specify what error to
        // show the user, fallback to logging the request/response info.


        let formattedError = (0, _idx.default)(errorResponse, _ => _.body.error.format) || (0, _idx.default)(errorResponse, _ => _.message);

        if (formattedError === '{_stack}') {
          formattedError = JSON.stringify(errorResponse.body.error);
        } else if (formattedError == null) {
          formattedError = [`command: ${command}`, `args: ${JSON.stringify(args)}`, `response: ${JSON.stringify(errorResponse)}`, `adapterExecutable: , ${JSON.stringify(this._adapterExecutable)}`].join(', ');
        }

        throw new Error(formattedError);
      });
    };

    return (0, _analytics.trackTiming)(`vs-debug-session:${command}`, operation, this._adapterAnalyticsExtras);
  }

  _sanitizeResponse(response) {
    try {
      if (response.command === 'variables') {
        const varResponse = response;
        const sanResponse = { ...varResponse,
          body: { ...varResponse.body,
            variables: varResponse.body.variables.map(v => ({ ...v,
              value: '<elided>'
            }))
          }
        }; // $FlowFixMe flow isn't recognizing that ...varResponse is filling in needed members

        return sanResponse;
      }

      if (response.command === 'evaluate') {
        const evalResponse = response;
        const sanResponse = { ...evalResponse,
          body: { ...evalResponse.body,
            result: '<elided>'
          }
        }; // $FlowFixMe flow isn't recognizing that ...evalResponse is filling in needed members

        return sanResponse;
      }

      return response;
    } catch (e) {
      // Don't let a malformed response prevent the response from bubbling up
      // to the debugger
      return {
        type: 'response',
        seq: response.seq,
        request_seq: response.request_seq,
        success: false,
        command: response.command,
        error: 'Error sanitizing response.',
        message: e.message
      };
    }
  }

  onEvent(event) {
    if (event.body != null) {
      // $FlowFixMe `sessionId` isn't in the type def.
      event.body.sessionId = this.getId();
    } else {
      // $FlowFixMe `event.body` type def.
      event.body = {
        sessionId: this.getId()
      };
    }

    (0, _analytics.track)('vs-debug-session:transaction', { ...this._adapterAnalyticsExtras,
      event
    });

    this._onDidEvent.next(event);

    switch (event.event) {
      case 'initialized':
        this._readyForBreakpoints = true;

        this._onDidInitialize.next(event);

        break;

      case 'stopped':
        this._onDidStop.next(event);

        break;

      case 'continued':
        this._onDidContinued.next(event);

        break;

      case 'thread':
        this._onDidThread.next(event);

        break;

      case 'output':
        this._onDidOutput.next(event);

        break;

      case 'breakpoint':
        this._onDidBreakpoint.next(event);

        break;

      case 'terminated':
        this._onDidTerminateDebugee.next(event);

        break;

      case 'exited':
        this._onDidExitDebugee.next(event);

        break;

      case 'adapter-exited':
        this._onDidExitAdapter.next(event);

        break;

      case 'module':
        this._onDidModule.next(event);

        break;

      case 'loadedSource':
        this._onDidLoadSource.next(event);

        break;

      default:
        this._onDidCustom.next(event);

        this._logger.info('Custom event type:', event);

        break;
    }
  }

  getCapabilities() {
    return this.capabilities;
  }

  async initialize(args) {
    const response = await this.send('initialize', args);
    return this._readCapabilities(response);
  }

  _readCapabilities(response) {
    if (response) {
      this.capabilities = { ...this.capabilities,
        ...response.body
      };
    }

    return response;
  }

  async launch(args) {
    const response = await this.send('launch', args);
    return this._readCapabilities(response);
  }

  async attach(args) {
    const response = await this.send('attach', args);
    return this._readCapabilities(response);
  }

  next(args) {
    if (this._isReadOnly) {
      throw new Error('Read only target cannot step.');
    }

    this._fireFakeContinued(args.threadId);

    return this.send('next', args);
  }

  stepIn(args) {
    if (this._isReadOnly) {
      throw new Error('Read only target cannot step.');
    }

    this._fireFakeContinued(args.threadId);

    return this.send('stepIn', args);
  }

  stepOut(args) {
    if (this._isReadOnly) {
      throw new Error('Read only target cannot step.');
    }

    this._fireFakeContinued(args.threadId);

    return this.send('stepOut', args);
  }

  continue(args) {
    if (this._isReadOnly) {
      throw new Error('Read only target cannot continue.');
    }

    this._fireFakeContinued(args.threadId);

    return this.send('continue', args);
  }

  pause(args) {
    if (this._isReadOnly) {
      throw new Error('Read only target cannot pause.');
    }

    return this.send('pause', args);
  }

  setVariable(args) {
    if (this._isReadOnly) {
      throw new Error('Read only target cannot set variable.');
    }

    return this.send('setVariable', args).then(response => {
      this._onDidEvaluate.next();

      return response;
    });
  }

  restartFrame(args, threadId) {
    if (this._isReadOnly) {
      throw new Error('Read only target cannot restart frame.');
    }

    this._fireFakeContinued(threadId);

    return this.send('restartFrame', args);
  }

  completions(args) {
    return this.send('completions', args);
  }

  async disconnect(restart = false, force = false) {
    if (this._disconnected && force) {
      this._stopServer();

      return;
    }

    if (this._adapterProcessSubscription != null && !this._disconnected) {
      // point of no return: from now on don't report any errors
      this._disconnected = true;
      await _rxjsCompatUmdMin.Observable.fromPromise(this.send('disconnect', {
        restart
      })).timeout(5000).catch(err => {
        if (!(err instanceof _rxjsCompatUmdMin.TimeoutError)) {
          throw err;
        }

        return _rxjsCompatUmdMin.Observable.empty();
      }).toPromise();

      this._stopServer();
    }
  }

  setBreakpoints(args) {
    return this.send('setBreakpoints', args);
  }

  setFunctionBreakpoints(args) {
    return this.send('setFunctionBreakpoints', args);
  }

  setExceptionBreakpoints(args) {
    return this.send('setExceptionBreakpoints', args);
  }

  configurationDone() {
    return this.send('configurationDone', null);
  }

  stackTrace(args) {
    return this.send('stackTrace', args);
  }

  exceptionInfo(args) {
    return this.send('exceptionInfo', args);
  }

  info(args) {
    return this.send('info', args);
  }

  scopes(args) {
    return this.send('scopes', args);
  }

  variables(args) {
    return this.send('variables', args);
  }

  source(args) {
    return this.send('source', args);
  }

  threads() {
    return this.send('threads', null);
  }

  evaluate(args) {
    return this.send('evaluate', args).then(result => {
      if (args.context === 'repl') {
        this._onDidEvaluate.next();
      }

      return result;
    });
  }

  stepBack(args) {
    this._fireFakeContinued(args.threadId);

    return this.send('stepBack', args);
  }

  reverseContinue(args) {
    if (this._isReadOnly) {
      throw new Error('Read only target cannot reverse continue.');
    }

    this._fireFakeContinued(args.threadId);

    return this.send('reverseContinue', args);
  }

  nuclide_continueToLocation(args) {
    if (this._isReadOnly) {
      throw new Error('Read only target cannot run to location.');
    }

    return this.custom('nuclide_continueToLocation', args);
  }

  getLengthInSeconds() {
    return (new Date().getTime() - this._startTime) / 1000;
  }

  async dispatchRequest(request, response) {
    if (request.command === 'runInTerminal') {
      const runInTerminalHandler = this._runInTerminalHandler;

      if (runInTerminalHandler == null) {
        this._logger.error("'runInTerminal' isn't supported for this debug session", request);

        return;
      }

      try {
        await runInTerminalHandler(request.arguments);
      } catch (error) {
        response.success = false;
        response.message = error.message;
      }

      this.sendResponse(response);
    } else if (request.command === 'handshake') {
      this._logger.error('TODO: handshake', request);
    } else {
      response.success = false;
      response.message = `unknown request '${request.command}'`;
      this.sendResponse(response);
    }
  }

  _fireFakeContinued(threadId, allThreadsContinued = false) {
    const event = {
      type: 'event',
      event: 'continued',
      body: {
        threadId,
        // $FlowFixMe
        allThreadsContinued
      },
      seq: 0
    };

    this._onDidContinued.next(event);

    this._onDidEvent.next(event);
  }

  _startServer() {
    this._adapterProcessSubscription = this._spawner.spawnAdapter(this._adapterExecutable).refCount().subscribe(message => {
      if (message.kind === 'stdout') {
        this.handleData(new Buffer(message.data));
      } else if (message.kind === 'stderr') {
        const event = {
          type: 'event',
          event: 'output',
          body: {
            category: 'stderr',
            output: message.data
          },
          seq: 0
        };

        this._onDidOutput.next(event);

        this._onDidEvent.next(event);

        this._logger.error(`adapter stderr: ${message.data}`);

        this._adapterErrorOutput = this._adapterErrorOutput + message.data;
      } else {
        (0, _assert.default)(message.kind === 'exit');
        const exitCode = message.exitCode || 0;

        if (exitCode === 0) {
          this.onServerExit(message.exitCode || 0);
        } else {
          this.onServerError(new Error(`Debug adapter exited with code: ${exitCode}`));
        }
      }
    });
    this.setOutput(this._spawner.write.bind(this._spawner));
  }

  _stopServer() {
    this.onEvent(raiseAdapterExitedEvent(0));

    if (this._adapterProcessSubscription == null) {
      return;
    }

    this._disconnected = true;

    this._adapterProcessSubscription.unsubscribe();

    this._endHandlers();
  }

  _endHandlers() {
    this._onDidInitialize.complete();

    this._onDidStop.complete();

    this._onDidContinued.complete();

    this._onDidTerminateDebugee.complete();

    this._onDidExitDebugee.complete();

    this._onDidExitAdapter.complete();

    this._onDidThread.complete();

    this._onDidOutput.complete();

    this._onDidBreakpoint.complete();

    this._onDidModule.complete();

    this._onDidLoadSource.complete();

    this._onDidCustom.complete();

    this._onDidEvent.complete();
  }

  onServerError(error) {
    this._logger.error('Adapter error:', error);

    this._stopServer();
  }

  onServerExit(code) {
    if (this._adapterProcessSubscription != null) {
      this._adapterProcessSubscription.unsubscribe();

      this._adapterProcessSubscription = null;
    }

    if (!this._disconnected) {
      this._logger.error(`Debug adapter process has terminated unexpectedly ${code}`);
    }

    this.onEvent(raiseAdapterExitedEvent(code));
  }

  isReadyForBreakpoints() {
    return this._readyForBreakpoints;
  }

  isDisconnected() {
    return this._disconnected;
  }

  dispose() {
    if (this._adapterErrorOutput) {
      (0, _analytics.track)('vs-debug-session:transaction', { ...this._adapterAnalyticsExtras,
        response: this._adapterErrorOutput
      });
    }

    this.disconnect();
  }

}

exports.default = VsDebugSession;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL251Y2xpZGUvbnVjbGlkZS1kZWJ1Z2dlci1jb21tb24vVnNEZWJ1Z1Nlc3Npb24uanMiXSwibmFtZXMiOlsicmFpc2VBZGFwdGVyRXhpdGVkRXZlbnQiLCJleGl0Q29kZSIsInNlcSIsInR5cGUiLCJldmVudCIsImJvZHkiLCJWc0RlYnVnU2Vzc2lvbiIsIlY4UHJvdG9jb2wiLCJjb25zdHJ1Y3RvciIsImlkIiwibG9nZ2VyIiwiYWRhcHRlckV4ZWN1dGFibGUiLCJhZGFwdGVyQW5hbHl0aWNzRXh0cmFzIiwic3Bhd25lciIsInNlbmRQcmVwcm9jZXNzb3JzIiwicmVjZWl2ZVByZXByb2Nlc3NvcnMiLCJydW5JblRlcm1pbmFsSGFuZGxlciIsImlzUmVhZE9ubHkiLCJfcmVhZHlGb3JCcmVha3BvaW50cyIsIl9kaXNjb25uZWN0ZWQiLCJfYWRhcHRlclByb2Nlc3NTdWJzY3JpcHRpb24iLCJfc3RhcnRUaW1lIiwiY2FwYWJpbGl0aWVzIiwiX2FkYXB0ZXJFeGVjdXRhYmxlIiwiX3NwYXduZXIiLCJfYWRhcHRlckFuYWx5dGljc0V4dHJhcyIsIl9hZGFwdGVyRXJyb3JPdXRwdXQiLCJfb25EaWRJbml0aWFsaXplIiwiX29uRGlkU3RvcCIsIl9vbkRpZENvbnRpbnVlZCIsIl9vbkRpZFRlcm1pbmF0ZURlYnVnZWUiLCJfb25EaWRFeGl0RGVidWdlZSIsIl9vbkRpZEV4aXRBZGFwdGVyIiwiX29uRGlkVGhyZWFkIiwiX29uRGlkT3V0cHV0IiwiX29uRGlkQnJlYWtwb2ludCIsIl9vbkRpZE1vZHVsZSIsIl9vbkRpZExvYWRTb3VyY2UiLCJfb25EaWRDdXN0b20iLCJfb25EaWRFdmVudCIsIl9vbkRpZEV2YWx1YXRlIiwiX3J1bkluVGVybWluYWxIYW5kbGVyIiwiX2lzUmVhZE9ubHkiLCJWc0FkYXB0ZXJTcGF3bmVyIiwiZGVidWdnZXJTZXNzaW9uSWQiLCJTdWJqZWN0Iiwib2JzZXJ2ZUluaXRpYWxpemVFdmVudHMiLCJhc09ic2VydmFibGUiLCJvYnNlcnZlU3RvcEV2ZW50cyIsIm9ic2VydmVDb250aW51ZWRFdmVudHMiLCJvYnNlcnZlVGVybWluYXRlRGVidWdlZUV2ZW50cyIsIm9ic2VydmVFeGl0ZWREZWJ1Z2VlRXZlbnRzIiwib2JzZXJ2ZUFkYXB0ZXJFeGl0ZWRFdmVudHMiLCJvYnNlcnZlVGhyZWFkRXZlbnRzIiwib2JzZXJ2ZU91dHB1dEV2ZW50cyIsIm9ic2VydmVCcmVha3BvaW50RXZlbnRzIiwib2JzZXJ2ZU1vZHVsZUV2ZW50cyIsIm9ic2VydmVTb3VyY2VMb2FkZWRFdmVudHMiLCJvYnNlcnZlQ3VzdG9tRXZlbnRzIiwib2JzZXJ2ZUV2YWx1YXRpb25zIiwib2JzZXJ2ZUFsbEV2ZW50cyIsIl9pbml0U2VydmVyIiwiX3N0YXJ0U2VydmVyIiwiRGF0ZSIsImdldFRpbWUiLCJjdXN0b20iLCJyZXF1ZXN0IiwiYXJncyIsInNlbmQiLCJjb21tYW5kIiwib3BlcmF0aW9uIiwidGhlbiIsInJlc3BvbnNlIiwic2FuaXRpemVkUmVzcG9uc2UiLCJfc2FuaXRpemVSZXNwb25zZSIsImFyZ3VtZW50cyIsImVycm9yUmVzcG9uc2UiLCJlcnJvck1lc3NhZ2UiLCJzaG93VXNlciIsImVycm9yRm9ybWF0U3RyaW5nIiwiZXJyb3IiLCJmb3JtYXQiLCJlcnJvck9iamVjdCIsIlN0cmluZyIsIkJvb2xlYW4iLCJ2YXJpYWJsZXMiLCJrZXkiLCJPYmplY3QiLCJrZXlzIiwicGF0dGVybiIsIlJlZ0V4cCIsInJlcGxhY2UiLCJhdG9tIiwibm90aWZpY2F0aW9ucyIsImFkZEVycm9yIiwibWVzc2FnZSIsIkVycm9yIiwiZm9ybWF0dGVkRXJyb3IiLCJfIiwiSlNPTiIsInN0cmluZ2lmeSIsImpvaW4iLCJ2YXJSZXNwb25zZSIsInNhblJlc3BvbnNlIiwibWFwIiwidiIsInZhbHVlIiwiZXZhbFJlc3BvbnNlIiwicmVzdWx0IiwiZSIsInJlcXVlc3Rfc2VxIiwic3VjY2VzcyIsIm9uRXZlbnQiLCJzZXNzaW9uSWQiLCJnZXRJZCIsIm5leHQiLCJfbG9nZ2VyIiwiaW5mbyIsImdldENhcGFiaWxpdGllcyIsImluaXRpYWxpemUiLCJfcmVhZENhcGFiaWxpdGllcyIsImxhdW5jaCIsImF0dGFjaCIsIl9maXJlRmFrZUNvbnRpbnVlZCIsInRocmVhZElkIiwic3RlcEluIiwic3RlcE91dCIsImNvbnRpbnVlIiwicGF1c2UiLCJzZXRWYXJpYWJsZSIsInJlc3RhcnRGcmFtZSIsImNvbXBsZXRpb25zIiwiZGlzY29ubmVjdCIsInJlc3RhcnQiLCJmb3JjZSIsIl9zdG9wU2VydmVyIiwiT2JzZXJ2YWJsZSIsImZyb21Qcm9taXNlIiwidGltZW91dCIsImNhdGNoIiwiZXJyIiwiVGltZW91dEVycm9yIiwiZW1wdHkiLCJ0b1Byb21pc2UiLCJzZXRCcmVha3BvaW50cyIsInNldEZ1bmN0aW9uQnJlYWtwb2ludHMiLCJzZXRFeGNlcHRpb25CcmVha3BvaW50cyIsImNvbmZpZ3VyYXRpb25Eb25lIiwic3RhY2tUcmFjZSIsImV4Y2VwdGlvbkluZm8iLCJzY29wZXMiLCJzb3VyY2UiLCJ0aHJlYWRzIiwiZXZhbHVhdGUiLCJjb250ZXh0Iiwic3RlcEJhY2siLCJyZXZlcnNlQ29udGludWUiLCJudWNsaWRlX2NvbnRpbnVlVG9Mb2NhdGlvbiIsImdldExlbmd0aEluU2Vjb25kcyIsImRpc3BhdGNoUmVxdWVzdCIsInNlbmRSZXNwb25zZSIsImFsbFRocmVhZHNDb250aW51ZWQiLCJzcGF3bkFkYXB0ZXIiLCJyZWZDb3VudCIsInN1YnNjcmliZSIsImtpbmQiLCJoYW5kbGVEYXRhIiwiQnVmZmVyIiwiZGF0YSIsImNhdGVnb3J5Iiwib3V0cHV0Iiwib25TZXJ2ZXJFeGl0Iiwib25TZXJ2ZXJFcnJvciIsInNldE91dHB1dCIsIndyaXRlIiwiYmluZCIsInVuc3Vic2NyaWJlIiwiX2VuZEhhbmRsZXJzIiwiY29tcGxldGUiLCJjb2RlIiwiaXNSZWFkeUZvckJyZWFrcG9pbnRzIiwiaXNEaXNjb25uZWN0ZWQiLCJkaXNwb3NlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBWUE7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UUFBbEI7O0FBQ0EsU0FBSzdJLGdCQUFMLENBQXNCNkksUUFBdEI7O0FBQ0EsU0FBSzVJLFlBQUwsQ0FBa0I0SSxRQUFsQjs7QUFDQSxTQUFLM0ksV0FBTCxDQUFpQjJJLFFBQWpCO0FBQ0Q7O0FBRUROLEVBQUFBLGFBQWEsQ0FBQzVGLEtBQUQsRUFBcUI7QUFDaEMsU0FBS29DLE9BQUwsQ0FBYXBDLEtBQWIsQ0FBbUIsZ0JBQW5CLEVBQXFDQSxLQUFyQzs7QUFDQSxTQUFLdUQsV0FBTDtBQUNEOztBQUVEb0MsRUFBQUEsWUFBWSxDQUFDUSxJQUFELEVBQXFCO0FBQy9CLFFBQUksS0FBSy9KLDJCQUFMLElBQW9DLElBQXhDLEVBQThDO0FBQzVDLFdBQUtBLDJCQUFMLENBQWlDNEosV0FBakM7O0FBQ0EsV0FBSzVKLDJCQUFMLEdBQW1DLElBQW5DO0FBQ0Q7O0FBQ0QsUUFBSSxDQUFDLEtBQUtELGFBQVYsRUFBeUI7QUFDdkIsV0FBS2lHLE9BQUwsQ0FBYXBDLEtBQWIsQ0FDRyxxREFBb0RtRyxJQUFLLEVBRDVEO0FBR0Q7O0FBQ0QsU0FBS25FLE9BQUwsQ0FBYWhILHVCQUF1QixDQUFDbUwsSUFBRCxDQUFwQztBQUNEOztBQUVEQyxFQUFBQSxxQkFBcUIsR0FBWTtBQUMvQixXQUFPLEtBQUtsSyxvQkFBWjtBQUNEOztBQUVEbUssRUFBQUEsY0FBYyxHQUFZO0FBQ3hCLFdBQU8sS0FBS2xLLGFBQVo7QUFDRDs7QUFFRG1LLEVBQUFBLE9BQU8sR0FBUztBQUNkLFFBQUksS0FBSzVKLG1CQUFULEVBQThCO0FBQzVCLDRCQUFNLDhCQUFOLEVBQXNDLEVBQ3BDLEdBQUcsS0FBS0QsdUJBRDRCO0FBRXBDK0MsUUFBQUEsUUFBUSxFQUFFLEtBQUs5QztBQUZxQixPQUF0QztBQUlEOztBQUNELFNBQUswRyxVQUFMO0FBQ0Q7O0FBcnRCb0QiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ29weXJpZ2h0IChjKSAyMDE3LXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXHJcbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbiAqXHJcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxyXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcclxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXHJcbiAqXHJcbiAqIEBmbG93XHJcbiAqIEBmb3JtYXRcclxuICovXHJcblxyXG5pbXBvcnQgKiBhcyBEZWJ1Z1Byb3RvY29sIGZyb20gJ3ZzY29kZS1kZWJ1Z3Byb3RvY29sJztcclxuaW1wb3J0IHR5cGUge1xyXG4gIElWc0FkYXB0ZXJTcGF3bmVyLFxyXG4gIE1lc3NhZ2VQcm9jZXNzb3IsXHJcbiAgVlNBZGFwdGVyRXhlY3V0YWJsZUluZm8sXHJcbn0gZnJvbSAnLi90eXBlcyc7XHJcbmltcG9ydCB0eXBlIHtQcm9jZXNzTWVzc2FnZX0gZnJvbSAnQGF0b20taWRlLWNvbW11bml0eS9udWNsaWRlLWNvbW1vbnMvcHJvY2Vzcyc7XHJcblxyXG5pbXBvcnQgVnNBZGFwdGVyU3Bhd25lciBmcm9tICcuL1ZzQWRhcHRlclNwYXduZXInO1xyXG5pbXBvcnQgVjhQcm90b2NvbCBmcm9tICcuL1Y4UHJvdG9jb2wnO1xyXG5pbXBvcnQge09ic2VydmFibGUsIFN1YmplY3QsIFRpbWVvdXRFcnJvcn0gZnJvbSAncnhqcy1jb21wYXQvYnVuZGxlcy9yeGpzLWNvbXBhdC51bWQubWluLmpzJztcclxuaW1wb3J0IGlkeCBmcm9tICdpZHgnO1xyXG5pbXBvcnQgaW52YXJpYW50IGZyb20gJ2Fzc2VydCc7XHJcbmltcG9ydCB7dHJhY2ssIHRyYWNrVGltaW5nfSBmcm9tICdAYXRvbS1pZGUtY29tbXVuaXR5L251Y2xpZGUtY29tbW9ucy9hbmFseXRpY3MnO1xyXG5pbXBvcnQgdXVpZCBmcm9tICd1dWlkJztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgQWRhcHRlckV4aXRlZEV2ZW50IGV4dGVuZHMgRGVidWdQcm90b2NvbC5EZWJ1Z0V2ZW50IHtcclxuICBldmVudDogJ2FkYXB0ZXItZXhpdGVkJztcclxuICBib2R5OiB7ZXhpdENvZGU6IG51bWJlcn07XHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIEFkYXB0ZXJBbmFseXRpY3NFeHRyYXMgPSB7XHJcbiAgYWRhcHRlcjogc3RyaW5nLFxyXG4gIGhvc3Q6IHN0cmluZyxcclxuICBpc1JlbW90ZTogYm9vbGVhbixcclxufTtcclxuXHJcbmZ1bmN0aW9uIHJhaXNlQWRhcHRlckV4aXRlZEV2ZW50KGV4aXRDb2RlOiBudW1iZXIpOiBBZGFwdGVyRXhpdGVkRXZlbnQge1xyXG4gIHJldHVybiB7XHJcbiAgICBzZXE6IDAsXHJcbiAgICB0eXBlOiAnZXZlbnQnLFxyXG4gICAgZXZlbnQ6ICdhZGFwdGVyLWV4aXRlZCcsXHJcbiAgICBib2R5OiB7ZXhpdENvZGV9LFxyXG4gIH07XHJcbn1cclxuXHJcbnR5cGUgUnVuSW5UZXJtaW5hbEhhbmRsZXIgPSAoXHJcbiAgYXJndW1lbnRzOiBEZWJ1Z1Byb3RvY29sLlJ1bkluVGVybWluYWxSZXF1ZXN0QXJndW1lbnRzLFxyXG4pID0+IFByb21pc2U8dm9pZD47XHJcblxyXG4vKipcclxuICogVXNlIFY4IEpTT04tUlBDIHByb3RvY29sIHRvIHNlbmQgJiByZWNlaXZlIG1lc3NhZ2VzXHJcbiAqIChyZXF1ZXN0cywgcmVzcG9uc2VzICYgZXZlbnRzKSBvdmVyIGBzdGRpb2Agb2YgYWRhcHRlciBjaGlsZCBwcm9jZXNzZXMuXHJcbiAqL1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBWc0RlYnVnU2Vzc2lvbiBleHRlbmRzIFY4UHJvdG9jb2wge1xyXG4gIF9yZWFkeUZvckJyZWFrcG9pbnRzOiBib29sZWFuO1xyXG4gIF9kaXNjb25uZWN0ZWQ6IGJvb2xlYW47XHJcblxyXG4gIF9hZGFwdGVyUHJvY2Vzc1N1YnNjcmlwdGlvbjogP3J4anMkU3Vic2NyaXB0aW9uO1xyXG4gIF9zdGFydFRpbWU6IG51bWJlcjtcclxuXHJcbiAgY2FwYWJpbGl0aWVzOiBEZWJ1Z1Byb3RvY29sLkNhcGFiaWxpdGllcztcclxuICBfYWRhcHRlckV4ZWN1dGFibGU6IFZTQWRhcHRlckV4ZWN1dGFibGVJbmZvO1xyXG4gIF9zcGF3bmVyOiBJVnNBZGFwdGVyU3Bhd25lcjtcclxuICBfYWRhcHRlckFuYWx5dGljc0V4dHJhczogQWRhcHRlckFuYWx5dGljc0V4dHJhcztcclxuICBfYWRhcHRlckVycm9yT3V0cHV0OiBzdHJpbmc7XHJcblxyXG4gIF9vbkRpZEluaXRpYWxpemU6IFN1YmplY3Q8RGVidWdQcm90b2NvbC5Jbml0aWFsaXplZEV2ZW50PjtcclxuICBfb25EaWRTdG9wOiBTdWJqZWN0PERlYnVnUHJvdG9jb2wuU3RvcHBlZEV2ZW50PjtcclxuICBfb25EaWRDb250aW51ZWQ6IFN1YmplY3Q8RGVidWdQcm90b2NvbC5Db250aW51ZWRFdmVudD47XHJcbiAgX29uRGlkVGVybWluYXRlRGVidWdlZTogU3ViamVjdDxEZWJ1Z1Byb3RvY29sLlRlcm1pbmF0ZWRFdmVudD47XHJcbiAgX29uRGlkRXhpdERlYnVnZWU6IFN1YmplY3Q8RGVidWdQcm90b2NvbC5FeGl0ZWRFdmVudD47XHJcbiAgX29uRGlkRXhpdEFkYXB0ZXI6IFN1YmplY3Q8QWRhcHRlckV4aXRlZEV2ZW50PjtcclxuICBfb25EaWRUaHJlYWQ6IFN1YmplY3Q8RGVidWdQcm90b2NvbC5UaHJlYWRFdmVudD47XHJcbiAgX29uRGlkT3V0cHV0OiBTdWJqZWN0PERlYnVnUHJvdG9jb2wuT3V0cHV0RXZlbnQ+O1xyXG4gIF9vbkRpZEJyZWFrcG9pbnQ6IFN1YmplY3Q8RGVidWdQcm90b2NvbC5CcmVha3BvaW50RXZlbnQ+O1xyXG4gIF9vbkRpZE1vZHVsZTogU3ViamVjdDxEZWJ1Z1Byb3RvY29sLk1vZHVsZUV2ZW50PjtcclxuICBfb25EaWRMb2FkU291cmNlOiBTdWJqZWN0PERlYnVnUHJvdG9jb2wuTG9hZGVkU291cmNlRXZlbnQ+O1xyXG4gIF9vbkRpZEN1c3RvbTogU3ViamVjdDxEZWJ1Z1Byb3RvY29sLkRlYnVnRXZlbnQ+O1xyXG4gIF9vbkRpZEV2ZW50OiBTdWJqZWN0PERlYnVnUHJvdG9jb2wuRXZlbnQgfCBBZGFwdGVyRXhpdGVkRXZlbnQ+O1xyXG4gIF9vbkRpZEV2YWx1YXRlOiBTdWJqZWN0PHZvaWQ+O1xyXG4gIF9ydW5JblRlcm1pbmFsSGFuZGxlcjogP1J1bkluVGVybWluYWxIYW5kbGVyO1xyXG4gIF9pc1JlYWRPbmx5OiBib29sZWFuO1xyXG5cclxuICBjb25zdHJ1Y3RvcihcclxuICAgIGlkOiBzdHJpbmcsXHJcbiAgICBsb2dnZXI6IGxvZzRqcyRMb2dnZXIsXHJcbiAgICBhZGFwdGVyRXhlY3V0YWJsZTogVlNBZGFwdGVyRXhlY3V0YWJsZUluZm8sXHJcbiAgICBhZGFwdGVyQW5hbHl0aWNzRXh0cmFzOiA/QWRhcHRlckFuYWx5dGljc0V4dHJhcyxcclxuICAgIHNwYXduZXI/OiBJVnNBZGFwdGVyU3Bhd25lcixcclxuICAgIHNlbmRQcmVwcm9jZXNzb3JzPzogTWVzc2FnZVByb2Nlc3NvcltdID0gW10sXHJcbiAgICByZWNlaXZlUHJlcHJvY2Vzc29ycz86IE1lc3NhZ2VQcm9jZXNzb3JbXSA9IFtdLFxyXG4gICAgcnVuSW5UZXJtaW5hbEhhbmRsZXI/OiBSdW5JblRlcm1pbmFsSGFuZGxlcixcclxuICAgIGlzUmVhZE9ubHk/OiBib29sZWFuID0gZmFsc2UsXHJcbiAgKSB7XHJcbiAgICBzdXBlcihpZCwgbG9nZ2VyLCBzZW5kUHJlcHJvY2Vzc29ycywgcmVjZWl2ZVByZXByb2Nlc3NvcnMpO1xyXG4gICAgdGhpcy5fYWRhcHRlckV4ZWN1dGFibGUgPSBhZGFwdGVyRXhlY3V0YWJsZTtcclxuICAgIHRoaXMuX3JlYWR5Rm9yQnJlYWtwb2ludHMgPSBmYWxzZTtcclxuICAgIHRoaXMuX3NwYXduZXIgPSBzcGF3bmVyID09IG51bGwgPyBuZXcgVnNBZGFwdGVyU3Bhd25lcigpIDogc3Bhd25lcjtcclxuICAgIHRoaXMuX2lzUmVhZE9ubHkgPSBpc1JlYWRPbmx5O1xyXG4gICAgdGhpcy5fYWRhcHRlckFuYWx5dGljc0V4dHJhcyA9IHtcclxuICAgICAgLi4uYWRhcHRlckFuYWx5dGljc0V4dHJhcyxcclxuICAgICAgLy8gJEZsb3dGaXhNZSBmbG93IGRvZXNuJ3QgY29uc2lkZXIgdXVpZCBjYWxsYWJsZSwgYnV0IGl0IGlzXHJcbiAgICAgIGRlYnVnZ2VyU2Vzc2lvbklkOiB1dWlkKCksXHJcbiAgICB9O1xyXG4gICAgdGhpcy5fYWRhcHRlckVycm9yT3V0cHV0ID0gJyc7XHJcblxyXG4gICAgdGhpcy5fb25EaWRJbml0aWFsaXplID0gbmV3IFN1YmplY3QoKTtcclxuICAgIHRoaXMuX29uRGlkU3RvcCA9IG5ldyBTdWJqZWN0KCk7XHJcbiAgICB0aGlzLl9vbkRpZENvbnRpbnVlZCA9IG5ldyBTdWJqZWN0KCk7XHJcbiAgICB0aGlzLl9vbkRpZFRlcm1pbmF0ZURlYnVnZWUgPSBuZXcgU3ViamVjdCgpO1xyXG4gICAgdGhpcy5fb25EaWRFeGl0RGVidWdlZSA9IG5ldyBTdWJqZWN0KCk7XHJcbiAgICB0aGlzLl9vbkRpZEV4aXRBZGFwdGVyID0gbmV3IFN1YmplY3QoKTtcclxuICAgIHRoaXMuX29uRGlkVGhyZWFkID0gbmV3IFN1YmplY3QoKTtcclxuICAgIHRoaXMuX29uRGlkT3V0cHV0ID0gbmV3IFN1YmplY3QoKTtcclxuICAgIHRoaXMuX29uRGlkQnJlYWtwb2ludCA9IG5ldyBTdWJqZWN0KCk7XHJcbiAgICB0aGlzLl9vbkRpZE1vZHVsZSA9IG5ldyBTdWJqZWN0KCk7XHJcbiAgICB0aGlzLl9vbkRpZExvYWRTb3VyY2UgPSBuZXcgU3ViamVjdCgpO1xyXG4gICAgdGhpcy5fb25EaWRDdXN0b20gPSBuZXcgU3ViamVjdCgpO1xyXG4gICAgdGhpcy5fb25EaWRFdmVudCA9IG5ldyBTdWJqZWN0KCk7XHJcbiAgICB0aGlzLl9vbkRpZEV2YWx1YXRlID0gbmV3IFN1YmplY3QoKTtcclxuICAgIHRoaXMuY2FwYWJpbGl0aWVzID0ge307XHJcbiAgICB0aGlzLl9ydW5JblRlcm1pbmFsSGFuZGxlciA9IHJ1bkluVGVybWluYWxIYW5kbGVyIHx8IG51bGw7XHJcbiAgfVxyXG5cclxuICBvYnNlcnZlSW5pdGlhbGl6ZUV2ZW50cygpOiBPYnNlcnZhYmxlPERlYnVnUHJvdG9jb2wuSW5pdGlhbGl6ZWRFdmVudD4ge1xyXG4gICAgcmV0dXJuIHRoaXMuX29uRGlkSW5pdGlhbGl6ZS5hc09ic2VydmFibGUoKTtcclxuICB9XHJcblxyXG4gIG9ic2VydmVTdG9wRXZlbnRzKCk6IE9ic2VydmFibGU8RGVidWdQcm90b2NvbC5TdG9wcGVkRXZlbnQ+IHtcclxuICAgIHJldHVybiB0aGlzLl9vbkRpZFN0b3AuYXNPYnNlcnZhYmxlKCk7XHJcbiAgfVxyXG5cclxuICBvYnNlcnZlQ29udGludWVkRXZlbnRzKCk6IE9ic2VydmFibGU8RGVidWdQcm90b2NvbC5Db250aW51ZWRFdmVudD4ge1xyXG4gICAgcmV0dXJuIHRoaXMuX29uRGlkQ29udGludWVkLmFzT2JzZXJ2YWJsZSgpO1xyXG4gIH1cclxuXHJcbiAgb2JzZXJ2ZVRlcm1pbmF0ZURlYnVnZWVFdmVudHMoKTogT2JzZXJ2YWJsZTxEZWJ1Z1Byb3RvY29sLlRlcm1pbmF0ZWRFdmVudD4ge1xyXG4gICAgcmV0dXJuIHRoaXMuX29uRGlkVGVybWluYXRlRGVidWdlZS5hc09ic2VydmFibGUoKTtcclxuICB9XHJcblxyXG4gIG9ic2VydmVFeGl0ZWREZWJ1Z2VlRXZlbnRzKCk6IE9ic2VydmFibGU8RGVidWdQcm90b2NvbC5FeGl0ZWRFdmVudD4ge1xyXG4gICAgcmV0dXJuIHRoaXMuX29uRGlkRXhpdERlYnVnZWUuYXNPYnNlcnZhYmxlKCk7XHJcbiAgfVxyXG5cclxuICBvYnNlcnZlQWRhcHRlckV4aXRlZEV2ZW50cygpOiBPYnNlcnZhYmxlPEFkYXB0ZXJFeGl0ZWRFdmVudD4ge1xyXG4gICAgcmV0dXJuIHRoaXMuX29uRGlkRXhpdEFkYXB0ZXIuYXNPYnNlcnZhYmxlKCk7XHJcbiAgfVxyXG5cclxuICBvYnNlcnZlVGhyZWFkRXZlbnRzKCk6IE9ic2VydmFibGU8RGVidWdQcm90b2NvbC5UaHJlYWRFdmVudD4ge1xyXG4gICAgcmV0dXJuIHRoaXMuX29uRGlkVGhyZWFkLmFzT2JzZXJ2YWJsZSgpO1xyXG4gIH1cclxuXHJcbiAgb2JzZXJ2ZU91dHB1dEV2ZW50cygpOiBPYnNlcnZhYmxlPERlYnVnUHJvdG9jb2wuT3V0cHV0RXZlbnQ+IHtcclxuICAgIHJldHVybiB0aGlzLl9vbkRpZE91dHB1dC5hc09ic2VydmFibGUoKTtcclxuICB9XHJcblxyXG4gIG9ic2VydmVCcmVha3BvaW50RXZlbnRzKCk6IE9ic2VydmFibGU8RGVidWdQcm90b2NvbC5CcmVha3BvaW50RXZlbnQ+IHtcclxuICAgIHJldHVybiB0aGlzLl9vbkRpZEJyZWFrcG9pbnQuYXNPYnNlcnZhYmxlKCk7XHJcbiAgfVxyXG5cclxuICBvYnNlcnZlTW9kdWxlRXZlbnRzKCk6IE9ic2VydmFibGU8RGVidWdQcm90b2NvbC5Nb2R1bGVFdmVudD4ge1xyXG4gICAgcmV0dXJuIHRoaXMuX29uRGlkTW9kdWxlLmFzT2JzZXJ2YWJsZSgpO1xyXG4gIH1cclxuXHJcbiAgb2JzZXJ2ZVNvdXJjZUxvYWRlZEV2ZW50cygpOiBPYnNlcnZhYmxlPERlYnVnUHJvdG9jb2wuTG9hZGVkU291cmNlRXZlbnQ+IHtcclxuICAgIHJldHVybiB0aGlzLl9vbkRpZExvYWRTb3VyY2UuYXNPYnNlcnZhYmxlKCk7XHJcbiAgfVxyXG5cclxuICBvYnNlcnZlQ3VzdG9tRXZlbnRzKCk6IE9ic2VydmFibGU8RGVidWdQcm90b2NvbC5EZWJ1Z0V2ZW50PiB7XHJcbiAgICByZXR1cm4gdGhpcy5fb25EaWRDdXN0b20uYXNPYnNlcnZhYmxlKCk7XHJcbiAgfVxyXG5cclxuICBvYnNlcnZlRXZhbHVhdGlvbnMoKTogT2JzZXJ2YWJsZTx2b2lkPiB7XHJcbiAgICByZXR1cm4gdGhpcy5fb25EaWRFdmFsdWF0ZS5hc09ic2VydmFibGUoKTtcclxuICB9XHJcblxyXG4gIG9ic2VydmVBbGxFdmVudHMoKTogT2JzZXJ2YWJsZTxEZWJ1Z1Byb3RvY29sLkV2ZW50IHwgQWRhcHRlckV4aXRlZEV2ZW50PiB7XHJcbiAgICByZXR1cm4gdGhpcy5fb25EaWRFdmVudC5hc09ic2VydmFibGUoKTtcclxuICB9XHJcblxyXG4gIF9pbml0U2VydmVyKCk6IHZvaWQge1xyXG4gICAgaWYgKHRoaXMuX2FkYXB0ZXJQcm9jZXNzU3Vic2NyaXB0aW9uICE9IG51bGwpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuX3N0YXJ0U2VydmVyKCk7XHJcbiAgICB0aGlzLl9zdGFydFRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcclxuICB9XHJcblxyXG4gIGN1c3RvbShyZXF1ZXN0OiBzdHJpbmcsIGFyZ3M6IGFueSk6IFByb21pc2U8RGVidWdQcm90b2NvbC5DdXN0b21SZXNwb25zZT4ge1xyXG4gICAgcmV0dXJuIHRoaXMuc2VuZChyZXF1ZXN0LCBhcmdzKTtcclxuICB9XHJcblxyXG4gIHNlbmQoY29tbWFuZDogc3RyaW5nLCBhcmdzOiBhbnkpOiBQcm9taXNlPGFueT4ge1xyXG4gICAgdGhpcy5faW5pdFNlcnZlcigpO1xyXG5cclxuICAgIGNvbnN0IG9wZXJhdGlvbiA9ICgpOiBQcm9taXNlPGFueT4gPT4ge1xyXG4gICAgICAvLyBCYWJlbCBCdWc6IGBzdXBlcmAgaXNuJ3Qgd29ya2luZyB3aXRoIGBhc3luY2BcclxuICAgICAgcmV0dXJuIHN1cGVyLnNlbmQoY29tbWFuZCwgYXJncykudGhlbihcclxuICAgICAgICAocmVzcG9uc2U6IERlYnVnUHJvdG9jb2wuUmVzcG9uc2UpID0+IHtcclxuICAgICAgICAgIGNvbnN0IHNhbml0aXplZFJlc3BvbnNlID0gdGhpcy5fc2FuaXRpemVSZXNwb25zZShyZXNwb25zZSk7XHJcbiAgICAgICAgICB0cmFjaygndnMtZGVidWctc2Vzc2lvbjp0cmFuc2FjdGlvbicsIHtcclxuICAgICAgICAgICAgLi4udGhpcy5fYWRhcHRlckFuYWx5dGljc0V4dHJhcyxcclxuICAgICAgICAgICAgcmVxdWVzdDoge2NvbW1hbmQsIGFyZ3VtZW50czogYXJnc30sXHJcbiAgICAgICAgICAgIHJlc3BvbnNlOiBzYW5pdGl6ZWRSZXNwb25zZSxcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgKGVycm9yUmVzcG9uc2U6IERlYnVnUHJvdG9jb2wuRXJyb3JSZXNwb25zZSkgPT4ge1xyXG4gICAgICAgICAgbGV0IGVycm9yTWVzc2FnZSA9IG51bGw7XHJcbiAgICAgICAgICBsZXQgc2hvd1VzZXIgPSBmYWxzZTtcclxuICAgICAgICAgIGNvbnN0IGVycm9yRm9ybWF0U3RyaW5nID0gZXJyb3JSZXNwb25zZS5ib2R5Py5lcnJvcj8uZm9ybWF0IHx8ICcnO1xyXG4gICAgICAgICAgaWYgKGVycm9yRm9ybWF0U3RyaW5nICE9PSAnJykge1xyXG4gICAgICAgICAgICBjb25zdCBlcnJvck9iamVjdDogRGVidWdQcm90b2NvbC5NZXNzYWdlID0gKGVycm9yUmVzcG9uc2UuYm9keVxyXG4gICAgICAgICAgICAgIC5lcnJvcjogYW55KTtcclxuICAgICAgICAgICAgLy8gUHJvdG9jb2wgcmVzcG9uc2UgY29udGFpbmVkIGFuIEVycm9yUmVzcG9uc2Ugd2l0aCBkZXRhaWxzXHJcbiAgICAgICAgICAgIC8vIGFib3V0IGhvdyB0aGUgZGVidWcgYWRhcHRlciB3YW50cyB1cyB0byBoYW5kbGUgdGhlIGVycm9yLlxyXG4gICAgICAgICAgICBlcnJvck1lc3NhZ2UgPSBTdHJpbmcoZXJyb3JGb3JtYXRTdHJpbmcpO1xyXG4gICAgICAgICAgICBzaG93VXNlciA9IEJvb2xlYW4oZXJyb3JPYmplY3Quc2hvd1VzZXIpO1xyXG4gICAgICAgICAgICBjb25zdCB2YXJpYWJsZXMgPSBlcnJvck9iamVjdC52YXJpYWJsZXM7XHJcbiAgICAgICAgICAgIGlmICh2YXJpYWJsZXMgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKHZhcmlhYmxlcykpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHBhdHRlcm4gPSBuZXcgUmVnRXhwKCd7JyArIGtleSArICd9JywgJ2cnKTtcclxuICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZSA9IGVycm9yTWVzc2FnZS5yZXBsYWNlKHBhdHRlcm4sIHZhcmlhYmxlc1trZXldKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIFRPRE86IEFsbG93IHRoZSBjb25zdW1lciBvZiB0aGUgc2Vzc2lvbiB0byByZWdpc3RlciBhIGdsb2JhbFxyXG4gICAgICAgICAgICAvLyBlcnJvciBoYW5kbGVyIHJvdXRpbmUgc28gd2UgY2FuIHN0aWxsIHByZXNlbnQgZXJyb3JzIGV2ZW5cclxuICAgICAgICAgICAgLy8gd2hlbiBydW5uaW5nIG91dHNpZGUgb2YgQXRvbS5cclxuICAgICAgICAgICAgaWYgKEJvb2xlYW4oc2hvd1VzZXIpICYmIHR5cGVvZiBhdG9tICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICAgIGF0b20ubm90aWZpY2F0aW9ucy5hZGRFcnJvcihlcnJvck1lc3NhZ2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9IGVsc2UgaWYgKGVycm9yUmVzcG9uc2UubWVzc2FnZSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIC8vIFJlc3BvbnNlIG1lc3NhZ2UgY29udGFpbmVkIGEgdXNlci1mYWNpbmcgc3RyaW5nIHRvIGRpc3BsYXkuXHJcbiAgICAgICAgICAgIGVycm9yTWVzc2FnZSA9IGVycm9yUmVzcG9uc2UubWVzc2FnZTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIFNlZSBpZiBSZXNwb25zZSBtZXNzYWdlIGNvbnRhaW5lZCBhIHVzZXItZmFjaW5nIHN0cmluZyB0byBkaXNwbGF5LlxyXG4gICAgICAgICAgICAvLyBUaGUgcHJvdG9jb2wgZXhwZWN0cyBtZXNzYWdlIHRvIGJlIG9uIHJlc3VsdCwgbm90IHJlc3VsdC5ib2R5XHJcbiAgICAgICAgICAgIC8vIGJ1dCBzb21lIGRlYnVnIGFkYXB0ZXJzIGFyZSBkb2luZyB0aGlzIGluY29ycmVjdGx5LiBXb3JrIHdpdGhcclxuICAgICAgICAgICAgLy8gdGhlbSBhbnl3YXkuLi5cclxuICAgICAgICAgICAgLy8gJEZsb3dJZ25vcmVcclxuICAgICAgICAgICAgZXJyb3JNZXNzYWdlID0gZXJyb3JSZXNwb25zZS5ib2R5Py5tZXNzYWdlO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIHRyYWNrKCd2cy1kZWJ1Zy1zZXNzaW9uOnRyYW5zYWN0aW9uJywge1xyXG4gICAgICAgICAgICAuLi50aGlzLl9hZGFwdGVyQW5hbHl0aWNzRXh0cmFzLFxyXG4gICAgICAgICAgICByZXF1ZXN0OiB7Y29tbWFuZCwgYXJndW1lbnRzOiBhcmdzfSxcclxuICAgICAgICAgICAgcmVzcG9uc2U6IGVycm9yUmVzcG9uc2UsXHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICBpZiAoZXJyb3JNZXNzYWdlICE9IG51bGwpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yTWVzc2FnZSk7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgLy8gSWYgdGhlIGRlYnVnIGFkYXB0ZXIgZGlkbid0IHNwZWNpZnkgd2hhdCBlcnJvciB0b1xyXG4gICAgICAgICAgLy8gc2hvdyB0aGUgdXNlciwgZmFsbGJhY2sgdG8gbG9nZ2luZyB0aGUgcmVxdWVzdC9yZXNwb25zZSBpbmZvLlxyXG4gICAgICAgICAgbGV0IGZvcm1hdHRlZEVycm9yID1cclxuICAgICAgICAgICAgaWR4KGVycm9yUmVzcG9uc2UsIF8gPT4gXy5ib2R5LmVycm9yLmZvcm1hdCkgfHxcclxuICAgICAgICAgICAgaWR4KGVycm9yUmVzcG9uc2UsIF8gPT4gXy5tZXNzYWdlKTtcclxuICAgICAgICAgIGlmIChmb3JtYXR0ZWRFcnJvciA9PT0gJ3tfc3RhY2t9Jykge1xyXG4gICAgICAgICAgICBmb3JtYXR0ZWRFcnJvciA9IEpTT04uc3RyaW5naWZ5KGVycm9yUmVzcG9uc2UuYm9keS5lcnJvcik7XHJcbiAgICAgICAgICB9IGVsc2UgaWYgKGZvcm1hdHRlZEVycm9yID09IG51bGwpIHtcclxuICAgICAgICAgICAgZm9ybWF0dGVkRXJyb3IgPSBbXHJcbiAgICAgICAgICAgICAgYGNvbW1hbmQ6ICR7Y29tbWFuZH1gLFxyXG4gICAgICAgICAgICAgIGBhcmdzOiAke0pTT04uc3RyaW5naWZ5KGFyZ3MpfWAsXHJcbiAgICAgICAgICAgICAgYHJlc3BvbnNlOiAke0pTT04uc3RyaW5naWZ5KGVycm9yUmVzcG9uc2UpfWAsXHJcbiAgICAgICAgICAgICAgYGFkYXB0ZXJFeGVjdXRhYmxlOiAsICR7SlNPTi5zdHJpbmdpZnkodGhpcy5fYWRhcHRlckV4ZWN1dGFibGUpfWAsXHJcbiAgICAgICAgICAgIF0uam9pbignLCAnKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihmb3JtYXR0ZWRFcnJvcik7XHJcbiAgICAgICAgfSxcclxuICAgICAgKTtcclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIHRyYWNrVGltaW5nKFxyXG4gICAgICBgdnMtZGVidWctc2Vzc2lvbjoke2NvbW1hbmR9YCxcclxuICAgICAgb3BlcmF0aW9uLFxyXG4gICAgICB0aGlzLl9hZGFwdGVyQW5hbHl0aWNzRXh0cmFzLFxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIF9zYW5pdGl6ZVJlc3BvbnNlKFxyXG4gICAgcmVzcG9uc2U6IERlYnVnUHJvdG9jb2wuYmFzZSRSZXNwb25zZSxcclxuICApOiBEZWJ1Z1Byb3RvY29sLmJhc2UkUmVzcG9uc2Uge1xyXG4gICAgdHJ5IHtcclxuICAgICAgaWYgKHJlc3BvbnNlLmNvbW1hbmQgPT09ICd2YXJpYWJsZXMnKSB7XHJcbiAgICAgICAgY29uc3QgdmFyUmVzcG9uc2UgPSAoKHJlc3BvbnNlOiBhbnkpOiBEZWJ1Z1Byb3RvY29sLlZhcmlhYmxlc1Jlc3BvbnNlKTtcclxuICAgICAgICBjb25zdCBzYW5SZXNwb25zZSA9IHtcclxuICAgICAgICAgIC4uLnZhclJlc3BvbnNlLFxyXG4gICAgICAgICAgYm9keToge1xyXG4gICAgICAgICAgICAuLi52YXJSZXNwb25zZS5ib2R5LFxyXG4gICAgICAgICAgICB2YXJpYWJsZXM6IHZhclJlc3BvbnNlLmJvZHkudmFyaWFibGVzLm1hcCh2ID0+ICh7XHJcbiAgICAgICAgICAgICAgLi4udixcclxuICAgICAgICAgICAgICB2YWx1ZTogJzxlbGlkZWQ+JyxcclxuICAgICAgICAgICAgfSkpLFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8vICRGbG93Rml4TWUgZmxvdyBpc24ndCByZWNvZ25pemluZyB0aGF0IC4uLnZhclJlc3BvbnNlIGlzIGZpbGxpbmcgaW4gbmVlZGVkIG1lbWJlcnNcclxuICAgICAgICByZXR1cm4gc2FuUmVzcG9uc2U7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHJlc3BvbnNlLmNvbW1hbmQgPT09ICdldmFsdWF0ZScpIHtcclxuICAgICAgICBjb25zdCBldmFsUmVzcG9uc2UgPSAoKHJlc3BvbnNlOiBhbnkpOiBEZWJ1Z1Byb3RvY29sLkV2YWx1YXRlUmVzcG9uc2UpO1xyXG4gICAgICAgIGNvbnN0IHNhblJlc3BvbnNlID0ge1xyXG4gICAgICAgICAgLi4uZXZhbFJlc3BvbnNlLFxyXG4gICAgICAgICAgYm9keToge1xyXG4gICAgICAgICAgICAuLi5ldmFsUmVzcG9uc2UuYm9keSxcclxuICAgICAgICAgICAgcmVzdWx0OiAnPGVsaWRlZD4nLFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8vICRGbG93Rml4TWUgZmxvdyBpc24ndCByZWNvZ25pemluZyB0aGF0IC4uLmV2YWxSZXNwb25zZSBpcyBmaWxsaW5nIGluIG5lZWRlZCBtZW1iZXJzXHJcbiAgICAgICAgcmV0dXJuIHNhblJlc3BvbnNlO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiByZXNwb25zZTtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgLy8gRG9uJ3QgbGV0IGEgbWFsZm9ybWVkIHJlc3BvbnNlIHByZXZlbnQgdGhlIHJlc3BvbnNlIGZyb20gYnViYmxpbmcgdXBcclxuICAgICAgLy8gdG8gdGhlIGRlYnVnZ2VyXHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgdHlwZTogJ3Jlc3BvbnNlJyxcclxuICAgICAgICBzZXE6IHJlc3BvbnNlLnNlcSxcclxuICAgICAgICByZXF1ZXN0X3NlcTogcmVzcG9uc2UucmVxdWVzdF9zZXEsXHJcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgY29tbWFuZDogcmVzcG9uc2UuY29tbWFuZCxcclxuICAgICAgICBlcnJvcjogJ0Vycm9yIHNhbml0aXppbmcgcmVzcG9uc2UuJyxcclxuICAgICAgICBtZXNzYWdlOiBlLm1lc3NhZ2UsXHJcbiAgICAgIH07XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBvbkV2ZW50KGV2ZW50OiBEZWJ1Z1Byb3RvY29sLkV2ZW50IHwgQWRhcHRlckV4aXRlZEV2ZW50KTogdm9pZCB7XHJcbiAgICBpZiAoZXZlbnQuYm9keSAhPSBudWxsKSB7XHJcbiAgICAgIC8vICRGbG93Rml4TWUgYHNlc3Npb25JZGAgaXNuJ3QgaW4gdGhlIHR5cGUgZGVmLlxyXG4gICAgICBldmVudC5ib2R5LnNlc3Npb25JZCA9IHRoaXMuZ2V0SWQoKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIC8vICRGbG93Rml4TWUgYGV2ZW50LmJvZHlgIHR5cGUgZGVmLlxyXG4gICAgICBldmVudC5ib2R5ID0ge3Nlc3Npb25JZDogdGhpcy5nZXRJZCgpfTtcclxuICAgIH1cclxuXHJcbiAgICB0cmFjaygndnMtZGVidWctc2Vzc2lvbjp0cmFuc2FjdGlvbicsIHtcclxuICAgICAgLi4udGhpcy5fYWRhcHRlckFuYWx5dGljc0V4dHJhcyxcclxuICAgICAgZXZlbnQsXHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9vbkRpZEV2ZW50Lm5leHQoZXZlbnQpO1xyXG5cclxuICAgIHN3aXRjaCAoZXZlbnQuZXZlbnQpIHtcclxuICAgICAgY2FzZSAnaW5pdGlhbGl6ZWQnOlxyXG4gICAgICAgIHRoaXMuX3JlYWR5Rm9yQnJlYWtwb2ludHMgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuX29uRGlkSW5pdGlhbGl6ZS5uZXh0KGV2ZW50KTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAnc3RvcHBlZCc6XHJcbiAgICAgICAgdGhpcy5fb25EaWRTdG9wLm5leHQoZXZlbnQpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdjb250aW51ZWQnOlxyXG4gICAgICAgIHRoaXMuX29uRGlkQ29udGludWVkLm5leHQoZXZlbnQpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICd0aHJlYWQnOlxyXG4gICAgICAgIHRoaXMuX29uRGlkVGhyZWFkLm5leHQoZXZlbnQpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdvdXRwdXQnOlxyXG4gICAgICAgIHRoaXMuX29uRGlkT3V0cHV0Lm5leHQoZXZlbnQpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdicmVha3BvaW50JzpcclxuICAgICAgICB0aGlzLl9vbkRpZEJyZWFrcG9pbnQubmV4dChldmVudCk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ3Rlcm1pbmF0ZWQnOlxyXG4gICAgICAgIHRoaXMuX29uRGlkVGVybWluYXRlRGVidWdlZS5uZXh0KGV2ZW50KTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAnZXhpdGVkJzpcclxuICAgICAgICB0aGlzLl9vbkRpZEV4aXREZWJ1Z2VlLm5leHQoZXZlbnQpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdhZGFwdGVyLWV4aXRlZCc6XHJcbiAgICAgICAgdGhpcy5fb25EaWRFeGl0QWRhcHRlci5uZXh0KGV2ZW50KTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAnbW9kdWxlJzpcclxuICAgICAgICB0aGlzLl9vbkRpZE1vZHVsZS5uZXh0KGV2ZW50KTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAnbG9hZGVkU291cmNlJzpcclxuICAgICAgICB0aGlzLl9vbkRpZExvYWRTb3VyY2UubmV4dChldmVudCk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgdGhpcy5fb25EaWRDdXN0b20ubmV4dChldmVudCk7XHJcbiAgICAgICAgdGhpcy5fbG9nZ2VyLmluZm8oJ0N1c3RvbSBldmVudCB0eXBlOicsIGV2ZW50KTtcclxuICAgICAgICBicmVhaztcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGdldENhcGFiaWxpdGllcygpOiBEZWJ1Z1Byb3RvY29sLkNhcGFiaWxpdGllcyB7XHJcbiAgICByZXR1cm4gdGhpcy5jYXBhYmlsaXRpZXM7XHJcbiAgfVxyXG5cclxuICBhc3luYyBpbml0aWFsaXplKFxyXG4gICAgYXJnczogRGVidWdQcm90b2NvbC5Jbml0aWFsaXplUmVxdWVzdEFyZ3VtZW50cyxcclxuICApOiBQcm9taXNlPERlYnVnUHJvdG9jb2wuSW5pdGlhbGl6ZVJlc3BvbnNlPiB7XHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuc2VuZCgnaW5pdGlhbGl6ZScsIGFyZ3MpO1xyXG4gICAgcmV0dXJuIHRoaXMuX3JlYWRDYXBhYmlsaXRpZXMocmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgX3JlYWRDYXBhYmlsaXRpZXMocmVzcG9uc2U6IGFueSk6IGFueSB7XHJcbiAgICBpZiAocmVzcG9uc2UpIHtcclxuICAgICAgdGhpcy5jYXBhYmlsaXRpZXMgPSB7XHJcbiAgICAgICAgLi4udGhpcy5jYXBhYmlsaXRpZXMsXHJcbiAgICAgICAgLi4ucmVzcG9uc2UuYm9keSxcclxuICAgICAgfTtcclxuICAgIH1cclxuICAgIHJldHVybiByZXNwb25zZTtcclxuICB9XHJcblxyXG4gIGFzeW5jIGxhdW5jaChcclxuICAgIGFyZ3M6IERlYnVnUHJvdG9jb2wuTGF1bmNoUmVxdWVzdEFyZ3VtZW50cyxcclxuICApOiBQcm9taXNlPERlYnVnUHJvdG9jb2wuTGF1bmNoUmVzcG9uc2U+IHtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kKCdsYXVuY2gnLCBhcmdzKTtcclxuICAgIHJldHVybiB0aGlzLl9yZWFkQ2FwYWJpbGl0aWVzKHJlc3BvbnNlKTtcclxuICB9XHJcblxyXG4gIGFzeW5jIGF0dGFjaChcclxuICAgIGFyZ3M6IERlYnVnUHJvdG9jb2wuQXR0YWNoUmVxdWVzdEFyZ3VtZW50cyxcclxuICApOiBQcm9taXNlPERlYnVnUHJvdG9jb2wuQXR0YWNoUmVzcG9uc2U+IHtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kKCdhdHRhY2gnLCBhcmdzKTtcclxuICAgIHJldHVybiB0aGlzLl9yZWFkQ2FwYWJpbGl0aWVzKHJlc3BvbnNlKTtcclxuICB9XHJcblxyXG4gIG5leHQoYXJnczogRGVidWdQcm90b2NvbC5OZXh0QXJndW1lbnRzKTogUHJvbWlzZTxEZWJ1Z1Byb3RvY29sLk5leHRSZXNwb25zZT4ge1xyXG4gICAgaWYgKHRoaXMuX2lzUmVhZE9ubHkpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZWFkIG9ubHkgdGFyZ2V0IGNhbm5vdCBzdGVwLicpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuX2ZpcmVGYWtlQ29udGludWVkKGFyZ3MudGhyZWFkSWQpO1xyXG4gICAgcmV0dXJuIHRoaXMuc2VuZCgnbmV4dCcsIGFyZ3MpO1xyXG4gIH1cclxuXHJcbiAgc3RlcEluKFxyXG4gICAgYXJnczogRGVidWdQcm90b2NvbC5TdGVwSW5Bcmd1bWVudHMsXHJcbiAgKTogUHJvbWlzZTxEZWJ1Z1Byb3RvY29sLlN0ZXBJblJlc3BvbnNlPiB7XHJcbiAgICBpZiAodGhpcy5faXNSZWFkT25seSkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlYWQgb25seSB0YXJnZXQgY2Fubm90IHN0ZXAuJyk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5fZmlyZUZha2VDb250aW51ZWQoYXJncy50aHJlYWRJZCk7XHJcbiAgICByZXR1cm4gdGhpcy5zZW5kKCdzdGVwSW4nLCBhcmdzKTtcclxuICB9XHJcblxyXG4gIHN0ZXBPdXQoXHJcbiAgICBhcmdzOiBEZWJ1Z1Byb3RvY29sLlN0ZXBPdXRBcmd1bWVudHMsXHJcbiAgKTogUHJvbWlzZTxEZWJ1Z1Byb3RvY29sLlN0ZXBPdXRSZXNwb25zZT4ge1xyXG4gICAgaWYgKHRoaXMuX2lzUmVhZE9ubHkpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZWFkIG9ubHkgdGFyZ2V0IGNhbm5vdCBzdGVwLicpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuX2ZpcmVGYWtlQ29udGludWVkKGFyZ3MudGhyZWFkSWQpO1xyXG4gICAgcmV0dXJuIHRoaXMuc2VuZCgnc3RlcE91dCcsIGFyZ3MpO1xyXG4gIH1cclxuXHJcbiAgY29udGludWUoXHJcbiAgICBhcmdzOiBEZWJ1Z1Byb3RvY29sLkNvbnRpbnVlQXJndW1lbnRzLFxyXG4gICk6IFByb21pc2U8RGVidWdQcm90b2NvbC5Db250aW51ZVJlc3BvbnNlPiB7XHJcbiAgICBpZiAodGhpcy5faXNSZWFkT25seSkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlYWQgb25seSB0YXJnZXQgY2Fubm90IGNvbnRpbnVlLicpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuX2ZpcmVGYWtlQ29udGludWVkKGFyZ3MudGhyZWFkSWQpO1xyXG4gICAgcmV0dXJuIHRoaXMuc2VuZCgnY29udGludWUnLCBhcmdzKTtcclxuICB9XHJcblxyXG4gIHBhdXNlKFxyXG4gICAgYXJnczogRGVidWdQcm90b2NvbC5QYXVzZUFyZ3VtZW50cyxcclxuICApOiBQcm9taXNlPERlYnVnUHJvdG9jb2wuUGF1c2VSZXNwb25zZT4ge1xyXG4gICAgaWYgKHRoaXMuX2lzUmVhZE9ubHkpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZWFkIG9ubHkgdGFyZ2V0IGNhbm5vdCBwYXVzZS4nKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdGhpcy5zZW5kKCdwYXVzZScsIGFyZ3MpO1xyXG4gIH1cclxuXHJcbiAgc2V0VmFyaWFibGUoXHJcbiAgICBhcmdzOiBEZWJ1Z1Byb3RvY29sLlNldFZhcmlhYmxlQXJndW1lbnRzLFxyXG4gICk6IFByb21pc2U8RGVidWdQcm90b2NvbC5TZXRWYXJpYWJsZVJlc3BvbnNlPiB7XHJcbiAgICBpZiAodGhpcy5faXNSZWFkT25seSkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlYWQgb25seSB0YXJnZXQgY2Fubm90IHNldCB2YXJpYWJsZS4nKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdGhpcy5zZW5kKCdzZXRWYXJpYWJsZScsIGFyZ3MpLnRoZW4ocmVzcG9uc2UgPT4ge1xyXG4gICAgICB0aGlzLl9vbkRpZEV2YWx1YXRlLm5leHQoKTtcclxuICAgICAgcmV0dXJuIHJlc3BvbnNlO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICByZXN0YXJ0RnJhbWUoXHJcbiAgICBhcmdzOiBEZWJ1Z1Byb3RvY29sLlJlc3RhcnRGcmFtZUFyZ3VtZW50cyxcclxuICAgIHRocmVhZElkOiBudW1iZXIsXHJcbiAgKTogUHJvbWlzZTxEZWJ1Z1Byb3RvY29sLlJlc3RhcnRGcmFtZVJlc3BvbnNlPiB7XHJcbiAgICBpZiAodGhpcy5faXNSZWFkT25seSkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlYWQgb25seSB0YXJnZXQgY2Fubm90IHJlc3RhcnQgZnJhbWUuJyk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5fZmlyZUZha2VDb250aW51ZWQodGhyZWFkSWQpO1xyXG4gICAgcmV0dXJuIHRoaXMuc2VuZCgncmVzdGFydEZyYW1lJywgYXJncyk7XHJcbiAgfVxyXG5cclxuICBjb21wbGV0aW9ucyhcclxuICAgIGFyZ3M6IERlYnVnUHJvdG9jb2wuQ29tcGxldGlvbnNBcmd1bWVudHMsXHJcbiAgKTogUHJvbWlzZTxEZWJ1Z1Byb3RvY29sLkNvbXBsZXRpb25zUmVzcG9uc2U+IHtcclxuICAgIHJldHVybiB0aGlzLnNlbmQoJ2NvbXBsZXRpb25zJywgYXJncyk7XHJcbiAgfVxyXG5cclxuICBhc3luYyBkaXNjb25uZWN0KFxyXG4gICAgcmVzdGFydD86IGJvb2xlYW4gPSBmYWxzZSxcclxuICAgIGZvcmNlPzogYm9vbGVhbiA9IGZhbHNlLFxyXG4gICk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgaWYgKHRoaXMuX2Rpc2Nvbm5lY3RlZCAmJiBmb3JjZSkge1xyXG4gICAgICB0aGlzLl9zdG9wU2VydmVyKCk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodGhpcy5fYWRhcHRlclByb2Nlc3NTdWJzY3JpcHRpb24gIT0gbnVsbCAmJiAhdGhpcy5fZGlzY29ubmVjdGVkKSB7XHJcbiAgICAgIC8vIHBvaW50IG9mIG5vIHJldHVybjogZnJvbSBub3cgb24gZG9uJ3QgcmVwb3J0IGFueSBlcnJvcnNcclxuICAgICAgdGhpcy5fZGlzY29ubmVjdGVkID0gdHJ1ZTtcclxuICAgICAgYXdhaXQgT2JzZXJ2YWJsZS5mcm9tUHJvbWlzZSh0aGlzLnNlbmQoJ2Rpc2Nvbm5lY3QnLCB7cmVzdGFydH0pKVxyXG4gICAgICAgIC50aW1lb3V0KDUwMDApXHJcbiAgICAgICAgLmNhdGNoKGVyciA9PiB7XHJcbiAgICAgICAgICBpZiAoIShlcnIgaW5zdGFuY2VvZiBUaW1lb3V0RXJyb3IpKSB7XHJcbiAgICAgICAgICAgIHRocm93IGVycjtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHJldHVybiBPYnNlcnZhYmxlLmVtcHR5KCk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAudG9Qcm9taXNlKCk7XHJcbiAgICAgIHRoaXMuX3N0b3BTZXJ2ZXIoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldEJyZWFrcG9pbnRzKFxyXG4gICAgYXJnczogRGVidWdQcm90b2NvbC5TZXRCcmVha3BvaW50c0FyZ3VtZW50cyxcclxuICApOiBQcm9taXNlPERlYnVnUHJvdG9jb2wuU2V0QnJlYWtwb2ludHNSZXNwb25zZT4ge1xyXG4gICAgcmV0dXJuIHRoaXMuc2VuZCgnc2V0QnJlYWtwb2ludHMnLCBhcmdzKTtcclxuICB9XHJcblxyXG4gIHNldEZ1bmN0aW9uQnJlYWtwb2ludHMoXHJcbiAgICBhcmdzOiBEZWJ1Z1Byb3RvY29sLlNldEZ1bmN0aW9uQnJlYWtwb2ludHNBcmd1bWVudHMsXHJcbiAgKTogUHJvbWlzZTxEZWJ1Z1Byb3RvY29sLlNldEZ1bmN0aW9uQnJlYWtwb2ludHNSZXNwb25zZT4ge1xyXG4gICAgcmV0dXJuIHRoaXMuc2VuZCgnc2V0RnVuY3Rpb25CcmVha3BvaW50cycsIGFyZ3MpO1xyXG4gIH1cclxuXHJcbiAgc2V0RXhjZXB0aW9uQnJlYWtwb2ludHMoXHJcbiAgICBhcmdzOiBEZWJ1Z1Byb3RvY29sLlNldEV4Y2VwdGlvbkJyZWFrcG9pbnRzQXJndW1lbnRzLFxyXG4gICk6IFByb21pc2U8RGVidWdQcm90b2NvbC5TZXRFeGNlcHRpb25CcmVha3BvaW50c1Jlc3BvbnNlPiB7XHJcbiAgICByZXR1cm4gdGhpcy5zZW5kKCdzZXRFeGNlcHRpb25CcmVha3BvaW50cycsIGFyZ3MpO1xyXG4gIH1cclxuXHJcbiAgY29uZmlndXJhdGlvbkRvbmUoKTogUHJvbWlzZTxEZWJ1Z1Byb3RvY29sLkNvbmZpZ3VyYXRpb25Eb25lUmVzcG9uc2U+IHtcclxuICAgIHJldHVybiB0aGlzLnNlbmQoJ2NvbmZpZ3VyYXRpb25Eb25lJywgbnVsbCk7XHJcbiAgfVxyXG5cclxuICBzdGFja1RyYWNlKFxyXG4gICAgYXJnczogRGVidWdQcm90b2NvbC5TdGFja1RyYWNlQXJndW1lbnRzLFxyXG4gICk6IFByb21pc2U8RGVidWdQcm90b2NvbC5TdGFja1RyYWNlUmVzcG9uc2U+IHtcclxuICAgIHJldHVybiB0aGlzLnNlbmQoJ3N0YWNrVHJhY2UnLCBhcmdzKTtcclxuICB9XHJcblxyXG4gIGV4Y2VwdGlvbkluZm8oXHJcbiAgICBhcmdzOiBEZWJ1Z1Byb3RvY29sLkV4Y2VwdGlvbkluZm9Bcmd1bWVudHMsXHJcbiAgKTogUHJvbWlzZTxEZWJ1Z1Byb3RvY29sLkV4Y2VwdGlvbkluZm9SZXNwb25zZT4ge1xyXG4gICAgcmV0dXJuIHRoaXMuc2VuZCgnZXhjZXB0aW9uSW5mbycsIGFyZ3MpO1xyXG4gIH1cclxuXHJcbiAgaW5mbyhhcmdzOiBEZWJ1Z1Byb3RvY29sLkluZm9Bcmd1bWVudHMpOiBQcm9taXNlPERlYnVnUHJvdG9jb2wuSW5mb1Jlc3BvbnNlPiB7XHJcbiAgICByZXR1cm4gdGhpcy5zZW5kKCdpbmZvJywgYXJncyk7XHJcbiAgfVxyXG5cclxuICBzY29wZXMoXHJcbiAgICBhcmdzOiBEZWJ1Z1Byb3RvY29sLlNjb3Blc0FyZ3VtZW50cyxcclxuICApOiBQcm9taXNlPERlYnVnUHJvdG9jb2wuU2NvcGVzUmVzcG9uc2U+IHtcclxuICAgIHJldHVybiB0aGlzLnNlbmQoJ3Njb3BlcycsIGFyZ3MpO1xyXG4gIH1cclxuXHJcbiAgdmFyaWFibGVzKFxyXG4gICAgYXJnczogRGVidWdQcm90b2NvbC5WYXJpYWJsZXNBcmd1bWVudHMsXHJcbiAgKTogUHJvbWlzZTxEZWJ1Z1Byb3RvY29sLlZhcmlhYmxlc1Jlc3BvbnNlPiB7XHJcbiAgICByZXR1cm4gdGhpcy5zZW5kKCd2YXJpYWJsZXMnLCBhcmdzKTtcclxuICB9XHJcblxyXG4gIHNvdXJjZShcclxuICAgIGFyZ3M6IERlYnVnUHJvdG9jb2wuU291cmNlQXJndW1lbnRzLFxyXG4gICk6IFByb21pc2U8RGVidWdQcm90b2NvbC5Tb3VyY2VSZXNwb25zZT4ge1xyXG4gICAgcmV0dXJuIHRoaXMuc2VuZCgnc291cmNlJywgYXJncyk7XHJcbiAgfVxyXG5cclxuICB0aHJlYWRzKCk6IFByb21pc2U8RGVidWdQcm90b2NvbC5UaHJlYWRzUmVzcG9uc2U+IHtcclxuICAgIHJldHVybiB0aGlzLnNlbmQoJ3RocmVhZHMnLCBudWxsKTtcclxuICB9XHJcblxyXG4gIGV2YWx1YXRlKFxyXG4gICAgYXJnczogRGVidWdQcm90b2NvbC5FdmFsdWF0ZUFyZ3VtZW50cyxcclxuICApOiBQcm9taXNlPERlYnVnUHJvdG9jb2wuRXZhbHVhdGVSZXNwb25zZT4ge1xyXG4gICAgcmV0dXJuIHRoaXMuc2VuZCgnZXZhbHVhdGUnLCBhcmdzKS50aGVuKHJlc3VsdCA9PiB7XHJcbiAgICAgIGlmIChhcmdzLmNvbnRleHQgPT09ICdyZXBsJykge1xyXG4gICAgICAgIHRoaXMuX29uRGlkRXZhbHVhdGUubmV4dCgpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHN0ZXBCYWNrKFxyXG4gICAgYXJnczogRGVidWdQcm90b2NvbC5TdGVwQmFja0FyZ3VtZW50cyxcclxuICApOiBQcm9taXNlPERlYnVnUHJvdG9jb2wuU3RlcEJhY2tSZXNwb25zZT4ge1xyXG4gICAgdGhpcy5fZmlyZUZha2VDb250aW51ZWQoYXJncy50aHJlYWRJZCk7XHJcbiAgICByZXR1cm4gdGhpcy5zZW5kKCdzdGVwQmFjaycsIGFyZ3MpO1xyXG4gIH1cclxuXHJcbiAgcmV2ZXJzZUNvbnRpbnVlKFxyXG4gICAgYXJnczogRGVidWdQcm90b2NvbC5SZXZlcnNlQ29udGludWVBcmd1bWVudHMsXHJcbiAgKTogUHJvbWlzZTxEZWJ1Z1Byb3RvY29sLlJldmVyc2VDb250aW51ZVJlc3BvbnNlPiB7XHJcbiAgICBpZiAodGhpcy5faXNSZWFkT25seSkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlYWQgb25seSB0YXJnZXQgY2Fubm90IHJldmVyc2UgY29udGludWUuJyk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5fZmlyZUZha2VDb250aW51ZWQoYXJncy50aHJlYWRJZCk7XHJcbiAgICByZXR1cm4gdGhpcy5zZW5kKCdyZXZlcnNlQ29udGludWUnLCBhcmdzKTtcclxuICB9XHJcblxyXG4gIG51Y2xpZGVfY29udGludWVUb0xvY2F0aW9uKFxyXG4gICAgYXJnczogRGVidWdQcm90b2NvbC5udWNsaWRlX0NvbnRpbnVlVG9Mb2NhdGlvbkFyZ3VtZW50cyxcclxuICApOiBQcm9taXNlPERlYnVnUHJvdG9jb2wubnVjbGlkZV9Db250aW51ZVRvTG9jYXRpb25SZXNwb25zZT4ge1xyXG4gICAgaWYgKHRoaXMuX2lzUmVhZE9ubHkpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZWFkIG9ubHkgdGFyZ2V0IGNhbm5vdCBydW4gdG8gbG9jYXRpb24uJyk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuY3VzdG9tKCdudWNsaWRlX2NvbnRpbnVlVG9Mb2NhdGlvbicsIGFyZ3MpO1xyXG4gIH1cclxuXHJcbiAgZ2V0TGVuZ3RoSW5TZWNvbmRzKCk6IG51bWJlciB7XHJcbiAgICByZXR1cm4gKG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gdGhpcy5fc3RhcnRUaW1lKSAvIDEwMDA7XHJcbiAgfVxyXG5cclxuICBhc3luYyBkaXNwYXRjaFJlcXVlc3QoXHJcbiAgICByZXF1ZXN0OiBEZWJ1Z1Byb3RvY29sLlJlcXVlc3QsXHJcbiAgICByZXNwb25zZTogRGVidWdQcm90b2NvbC5SZXNwb25zZSxcclxuICApOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIGlmIChyZXF1ZXN0LmNvbW1hbmQgPT09ICdydW5JblRlcm1pbmFsJykge1xyXG4gICAgICBjb25zdCBydW5JblRlcm1pbmFsSGFuZGxlciA9IHRoaXMuX3J1bkluVGVybWluYWxIYW5kbGVyO1xyXG4gICAgICBpZiAocnVuSW5UZXJtaW5hbEhhbmRsZXIgPT0gbnVsbCkge1xyXG4gICAgICAgIHRoaXMuX2xvZ2dlci5lcnJvcihcclxuICAgICAgICAgIFwiJ3J1bkluVGVybWluYWwnIGlzbid0IHN1cHBvcnRlZCBmb3IgdGhpcyBkZWJ1ZyBzZXNzaW9uXCIsXHJcbiAgICAgICAgICByZXF1ZXN0LFxyXG4gICAgICAgICk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgYXdhaXQgcnVuSW5UZXJtaW5hbEhhbmRsZXIoKHJlcXVlc3QuYXJndW1lbnRzOiBhbnkpKTtcclxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICByZXNwb25zZS5zdWNjZXNzID0gZmFsc2U7XHJcbiAgICAgICAgcmVzcG9uc2UubWVzc2FnZSA9IGVycm9yLm1lc3NhZ2U7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5zZW5kUmVzcG9uc2UocmVzcG9uc2UpO1xyXG4gICAgfSBlbHNlIGlmIChyZXF1ZXN0LmNvbW1hbmQgPT09ICdoYW5kc2hha2UnKSB7XHJcbiAgICAgIHRoaXMuX2xvZ2dlci5lcnJvcignVE9ETzogaGFuZHNoYWtlJywgcmVxdWVzdCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXNwb25zZS5zdWNjZXNzID0gZmFsc2U7XHJcbiAgICAgIHJlc3BvbnNlLm1lc3NhZ2UgPSBgdW5rbm93biByZXF1ZXN0ICcke3JlcXVlc3QuY29tbWFuZH0nYDtcclxuICAgICAgdGhpcy5zZW5kUmVzcG9uc2UocmVzcG9uc2UpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX2ZpcmVGYWtlQ29udGludWVkKFxyXG4gICAgdGhyZWFkSWQ6IG51bWJlcixcclxuICAgIGFsbFRocmVhZHNDb250aW51ZWQ/OiBib29sZWFuID0gZmFsc2UsXHJcbiAgKTogdm9pZCB7XHJcbiAgICBjb25zdCBldmVudDogRGVidWdQcm90b2NvbC5Db250aW51ZWRFdmVudCA9IHtcclxuICAgICAgdHlwZTogJ2V2ZW50JyxcclxuICAgICAgZXZlbnQ6ICdjb250aW51ZWQnLFxyXG4gICAgICBib2R5OiB7XHJcbiAgICAgICAgdGhyZWFkSWQsXHJcbiAgICAgICAgLy8gJEZsb3dGaXhNZVxyXG4gICAgICAgIGFsbFRocmVhZHNDb250aW51ZWQsXHJcbiAgICAgIH0sXHJcbiAgICAgIHNlcTogMCxcclxuICAgIH07XHJcbiAgICB0aGlzLl9vbkRpZENvbnRpbnVlZC5uZXh0KGV2ZW50KTtcclxuICAgIHRoaXMuX29uRGlkRXZlbnQubmV4dChldmVudCk7XHJcbiAgfVxyXG5cclxuICBfc3RhcnRTZXJ2ZXIoKTogdm9pZCB7XHJcbiAgICB0aGlzLl9hZGFwdGVyUHJvY2Vzc1N1YnNjcmlwdGlvbiA9IHRoaXMuX3NwYXduZXJcclxuICAgICAgLnNwYXduQWRhcHRlcih0aGlzLl9hZGFwdGVyRXhlY3V0YWJsZSlcclxuICAgICAgLnJlZkNvdW50KClcclxuICAgICAgLnN1YnNjcmliZSgobWVzc2FnZTogUHJvY2Vzc01lc3NhZ2UpID0+IHtcclxuICAgICAgICBpZiAobWVzc2FnZS5raW5kID09PSAnc3Rkb3V0Jykge1xyXG4gICAgICAgICAgdGhpcy5oYW5kbGVEYXRhKG5ldyBCdWZmZXIobWVzc2FnZS5kYXRhKSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChtZXNzYWdlLmtpbmQgPT09ICdzdGRlcnInKSB7XHJcbiAgICAgICAgICBjb25zdCBldmVudDogRGVidWdQcm90b2NvbC5PdXRwdXRFdmVudCA9ICh7XHJcbiAgICAgICAgICAgIHR5cGU6ICdldmVudCcsXHJcbiAgICAgICAgICAgIGV2ZW50OiAnb3V0cHV0JyxcclxuICAgICAgICAgICAgYm9keToge1xyXG4gICAgICAgICAgICAgIGNhdGVnb3J5OiAnc3RkZXJyJyxcclxuICAgICAgICAgICAgICBvdXRwdXQ6IG1lc3NhZ2UuZGF0YSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc2VxOiAwLFxyXG4gICAgICAgICAgfTogYW55KTtcclxuICAgICAgICAgIHRoaXMuX29uRGlkT3V0cHV0Lm5leHQoZXZlbnQpO1xyXG4gICAgICAgICAgdGhpcy5fb25EaWRFdmVudC5uZXh0KGV2ZW50KTtcclxuICAgICAgICAgIHRoaXMuX2xvZ2dlci5lcnJvcihgYWRhcHRlciBzdGRlcnI6ICR7bWVzc2FnZS5kYXRhfWApO1xyXG4gICAgICAgICAgdGhpcy5fYWRhcHRlckVycm9yT3V0cHV0ID0gdGhpcy5fYWRhcHRlckVycm9yT3V0cHV0ICsgbWVzc2FnZS5kYXRhO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBpbnZhcmlhbnQobWVzc2FnZS5raW5kID09PSAnZXhpdCcpO1xyXG4gICAgICAgICAgY29uc3QgZXhpdENvZGUgPSBtZXNzYWdlLmV4aXRDb2RlIHx8IDA7XHJcbiAgICAgICAgICBpZiAoZXhpdENvZGUgPT09IDApIHtcclxuICAgICAgICAgICAgdGhpcy5vblNlcnZlckV4aXQobWVzc2FnZS5leGl0Q29kZSB8fCAwKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMub25TZXJ2ZXJFcnJvcihcclxuICAgICAgICAgICAgICBuZXcgRXJyb3IoYERlYnVnIGFkYXB0ZXIgZXhpdGVkIHdpdGggY29kZTogJHtleGl0Q29kZX1gKSxcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgIHRoaXMuc2V0T3V0cHV0KHRoaXMuX3NwYXduZXIud3JpdGUuYmluZCh0aGlzLl9zcGF3bmVyKSk7XHJcbiAgfVxyXG5cclxuICBfc3RvcFNlcnZlcigpOiB2b2lkIHtcclxuICAgIHRoaXMub25FdmVudChyYWlzZUFkYXB0ZXJFeGl0ZWRFdmVudCgwKSk7XHJcbiAgICBpZiAodGhpcy5fYWRhcHRlclByb2Nlc3NTdWJzY3JpcHRpb24gPT0gbnVsbCkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5fZGlzY29ubmVjdGVkID0gdHJ1ZTtcclxuICAgIHRoaXMuX2FkYXB0ZXJQcm9jZXNzU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XHJcbiAgICB0aGlzLl9lbmRIYW5kbGVycygpO1xyXG4gIH1cclxuXHJcbiAgX2VuZEhhbmRsZXJzKCk6IHZvaWQge1xyXG4gICAgdGhpcy5fb25EaWRJbml0aWFsaXplLmNvbXBsZXRlKCk7XHJcbiAgICB0aGlzLl9vbkRpZFN0b3AuY29tcGxldGUoKTtcclxuICAgIHRoaXMuX29uRGlkQ29udGludWVkLmNvbXBsZXRlKCk7XHJcbiAgICB0aGlzLl9vbkRpZFRlcm1pbmF0ZURlYnVnZWUuY29tcGxldGUoKTtcclxuICAgIHRoaXMuX29uRGlkRXhpdERlYnVnZWUuY29tcGxldGUoKTtcclxuICAgIHRoaXMuX29uRGlkRXhpdEFkYXB0ZXIuY29tcGxldGUoKTtcclxuICAgIHRoaXMuX29uRGlkVGhyZWFkLmNvbXBsZXRlKCk7XHJcbiAgICB0aGlzLl9vbkRpZE91dHB1dC5jb21wbGV0ZSgpO1xyXG4gICAgdGhpcy5fb25EaWRCcmVha3BvaW50LmNvbXBsZXRlKCk7XHJcbiAgICB0aGlzLl9vbkRpZE1vZHVsZS5jb21wbGV0ZSgpO1xyXG4gICAgdGhpcy5fb25EaWRMb2FkU291cmNlLmNvbXBsZXRlKCk7XHJcbiAgICB0aGlzLl9vbkRpZEN1c3RvbS5jb21wbGV0ZSgpO1xyXG4gICAgdGhpcy5fb25EaWRFdmVudC5jb21wbGV0ZSgpO1xyXG4gIH1cclxuXHJcbiAgb25TZXJ2ZXJFcnJvcihlcnJvcjogRXJyb3IpOiB2b2lkIHtcclxuICAgIHRoaXMuX2xvZ2dlci5lcnJvcignQWRhcHRlciBlcnJvcjonLCBlcnJvcik7XHJcbiAgICB0aGlzLl9zdG9wU2VydmVyKCk7XHJcbiAgfVxyXG5cclxuICBvblNlcnZlckV4aXQoY29kZTogbnVtYmVyKTogdm9pZCB7XHJcbiAgICBpZiAodGhpcy5fYWRhcHRlclByb2Nlc3NTdWJzY3JpcHRpb24gIT0gbnVsbCkge1xyXG4gICAgICB0aGlzLl9hZGFwdGVyUHJvY2Vzc1N1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xyXG4gICAgICB0aGlzLl9hZGFwdGVyUHJvY2Vzc1N1YnNjcmlwdGlvbiA9IG51bGw7XHJcbiAgICB9XHJcbiAgICBpZiAoIXRoaXMuX2Rpc2Nvbm5lY3RlZCkge1xyXG4gICAgICB0aGlzLl9sb2dnZXIuZXJyb3IoXHJcbiAgICAgICAgYERlYnVnIGFkYXB0ZXIgcHJvY2VzcyBoYXMgdGVybWluYXRlZCB1bmV4cGVjdGVkbHkgJHtjb2RlfWAsXHJcbiAgICAgICk7XHJcbiAgICB9XHJcbiAgICB0aGlzLm9uRXZlbnQocmFpc2VBZGFwdGVyRXhpdGVkRXZlbnQoY29kZSkpO1xyXG4gIH1cclxuXHJcbiAgaXNSZWFkeUZvckJyZWFrcG9pbnRzKCk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIHRoaXMuX3JlYWR5Rm9yQnJlYWtwb2ludHM7XHJcbiAgfVxyXG5cclxuICBpc0Rpc2Nvbm5lY3RlZCgpOiBib29sZWFuIHtcclxuICAgIHJldHVybiB0aGlzLl9kaXNjb25uZWN0ZWQ7XHJcbiAgfVxyXG5cclxuICBkaXNwb3NlKCk6IHZvaWQge1xyXG4gICAgaWYgKHRoaXMuX2FkYXB0ZXJFcnJvck91dHB1dCkge1xyXG4gICAgICB0cmFjaygndnMtZGVidWctc2Vzc2lvbjp0cmFuc2FjdGlvbicsIHtcclxuICAgICAgICAuLi50aGlzLl9hZGFwdGVyQW5hbHl0aWNzRXh0cmFzLFxyXG4gICAgICAgIHJlc3BvbnNlOiB0aGlzLl9hZGFwdGVyRXJyb3JPdXRwdXQsXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgdGhpcy5kaXNjb25uZWN0KCk7XHJcbiAgfVxyXG59XHJcbiJdfQ==