"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("atom");const t=(e,t)=>e===t;let n=T;const r={},o={owned:null,cleanups:null,context:null,owner:null};d(!1);var i=null,s=null;let a=null,l=null,c=null,u=0;function d(e,n=!0,o){const i={value:e,observers:null,observerSlots:null,pending:r,comparator:n?"function"==typeof n?n:t:void 0};return[h.bind(i),g.bind(i)]}function f(e,t){v(y(e,t,!1))}function p(e){let t,n=s;return s=null,t=e(),s=n,t}function m(e){!function(e,t){n=A;const r=y(e,t,!1);r.user=!0,c&&c.push(r)}((()=>p(e)))}function h(){if(this.state&&this.sources){const e=l;l=null,1===this.state?v(this):S(this),l=e}if(s){const e=this.observers?this.observers.length:0;s.sources?(s.sources.push(this),s.sourceSlots.push(e)):(s.sources=[this],s.sourceSlots=[e]),this.observers?(this.observers.push(s),this.observerSlots.push(s.sources.length-1)):(this.observers=[s],this.observerSlots=[s.sources.length-1])}return this.value}function g(e,t){return this.comparator&&this.comparator(this.value,e)?e:a?(this.pending===r&&a.push(this),this.pending=e,e):(this.value=e,!this.observers||l&&!this.observers.length||w((()=>{for(let e=0;e<this.observers.length;e+=1){const t=this.observers[e];null,t.observers&&2!==t.state&&x(t),t.state=1,t.pure?l.push(t):c.push(t)}if(l.length>1e6)throw l=[],new Error("Potential Infinite Loop Detected.")}),!1),e)}function v(e){if(!e.fn)return;N(e);const t=i,n=s,r=u;s=i=e,function(e,t,n){let r;try{r=e.fn(t)}catch(e){E(e)}(!e.updatedAt||e.updatedAt<=n)&&(e.observers&&e.observers.length?g.call(e,r,!0):e.value=r,e.updatedAt=n)}(e,e.value,r),s=n,i=t}function y(e,t,n){const r={fn:e,state:1,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:i,context:null,pure:n};return null===i||i!==o&&(i.owned?i.owned.push(r):i.owned=[r]),r}function b(e){let t,n=1===e.state&&e;if(e.suspense&&p(e.suspense.inFallback))return e.suspense.effects.push(e);for(;e.fn&&(e=e.owner);)2===e.state?t=e:1===e.state&&(n=e,t=void 0);if(t){const e=l;if(l=null,S(t),l=e,!n||1!==n.state)return}n&&v(n)}function w(e,t){if(l)return e();let o=!1;t||(l=[]),c?o=!0:c=[],u++;try{e()}catch(e){E(e)}finally{!function(e){l&&(T(l),l=null);if(e)return;c.length?function(e){if(a)return e();const t=a=[],n=e();a=null,w((()=>{for(let e=0;e<t.length;e+=1){const n=t[e];if(n.pending!==r){const e=n.pending;n.pending=r,g.call(n,e)}}}),!1)}((()=>{n(c),c=null})):c=null}(o)}}function T(e){for(let t=0;t<e.length;t++)b(e[t])}function A(e){let t,n=0;for(t=0;t<e.length;t++){const r=e[t];r.user?e[n++]=r:b(r)}const r=e.length;for(t=0;t<n;t++)b(e[t]);for(t=r;t<e.length;t++)b(e[t])}function S(e){e.state=0;for(let t=0;t<e.sources.length;t+=1){const n=e.sources[t];n.sources&&(1===n.state?b(n):2===n.state&&S(n))}}function x(e){for(let t=0;t<e.observers.length;t+=1){const n=e.observers[t];n.state||(n.state=2,n.observers&&x(n))}}function N(e){let t;if(e.sources)for(;e.sources.length;){const t=e.sources.pop(),n=e.sourceSlots.pop(),r=t.observers;if(r&&r.length){const e=r.pop(),o=t.observerSlots.pop();n<r.length&&(e.sourceSlots[o]=n,r[n]=e,t.observerSlots[n]=o)}}if(e.owned){for(t=0;t<e.owned.length;t++)N(e.owned[t]);e.owned=null}if(e.cleanups){for(t=0;t<e.cleanups.length;t++)e.cleanups[t]();e.cleanups=null}e.state=0,e.context=null}function E(e){throw e}const k=Symbol("state-proxy");function C(e,t){return p((()=>e(t)))}function D(){return!0}const L={get:(e,t,n)=>t===k?n:e.get(t),has:(e,t)=>e.has(t),set:D,deleteProperty:D,getOwnPropertyDescriptor:(e,t)=>({configurable:!0,enumerable:!0,get:()=>e.get(t),set:D,deleteProperty:D}),ownKeys:e=>e.keys()};function _(...e){return new Proxy({get(t){for(let n=e.length-1;n>=0;n--){const r=e[n][t];if(void 0!==r)return r}},has(t){for(let n=e.length-1;n>=0;n--)if(t in e[n])return!0;return!1},keys(){const t=[];for(let n=0;n<e.length;n++)t.push(...Object.keys(e[n]));return[...new Set(t)]}},L)}const O=new Set(["className","indeterminate","value","allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","ismap","itemscope","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected","truespeed"]),R=new Set(["innerHTML","textContent","innerText","children"]),M={className:"class",htmlFor:"for"},P=new Set(["beforeinput","click","dblclick","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),H={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"};function $(e,n){return function(e,n,o=!0){const i=y(e,n,!0);return i.pending=r,i.observers=null,i.observerSlots=null,i.state=0,i.comparator=o?"function"==typeof o?o:t:void 0,v(i),h.bind(i)}(e,void 0,n)}function F(e,t,n){let r=n.length,o=t.length,i=r,s=0,a=0,l=t[o-1].nextSibling,c=null;for(;s<o||a<i;)if(o===s){const t=i<r?a?n[a-1].nextSibling:n[i-a]:l;for(;a<i;)e.insertBefore(n[a++],t)}else if(i===a)for(;s<o;)c&&c.has(t[s])||e.removeChild(t[s]),s++;else if(t[s]===n[a])s++,a++;else if(t[o-1]===n[i-1])o--,i--;else if(t[s]===n[i-1]&&n[a]===t[o-1]){const r=t[--o].nextSibling;e.insertBefore(n[a++],t[s++].nextSibling),e.insertBefore(n[--i],r),t[o]=n[i]}else{if(!c){c=new Map;let e=a;for(;e<i;)c.set(n[e],e++)}const r=c.get(t[s]);if(null!=r)if(a<r&&r<i){let l,u=s,d=1;for(;++u<o&&u<i&&null!=(l=c.get(t[u]))&&l===r+d;)d++;if(d>r-a){const o=t[s];for(;a<r;)e.insertBefore(n[a++],o)}else e.replaceChild(n[a++],t[s++])}else s++;else e.removeChild(t[s++])}}const I=Symbol("delegated-events");function z(e,t,n){let r;return function(e,t){t&&(i=t);const n=s,r=i,a=0===e.length?o:{owned:null,cleanups:null,context:null,owner:r,attached:!!t};let l;i=a,s=null;try{w((()=>l=e((()=>N(a)))),!0)}finally{s=n,i=r}}((o=>{r=o,X(t,e(),t.firstChild?null:void 0,n)})),()=>{r(),t.textContent=""}}function j(e,t,n){const r=document.createElement("template");if(r.innerHTML=e,t&&r.innerHTML.split("<").length-1!==t)throw`Template html does not match input:\n${r.innerHTML}\n\n${e}`;let o=r.content.firstChild;return n&&(o=o.firstChild),o}function B(e){const t=document[I]||(document[I]=new Set);for(let n=0,r=e.length;n<r;n++){const r=e[n];t.has(r)||(t.add(r),document.addEventListener(r,Z))}}function U(e,t,n){null==n?e.removeAttribute(t):e.setAttribute(t,n)}function G(e,t,n,r){null==r?e.removeAttributeNS(t,n):e.setAttributeNS(t,n,r)}function W(e,t,n,r){r?Array.isArray(n)?(e[`$$${t}`]=n[0],e[`$$${t}Data`]=n[1]):e[`$$${t}`]=n:Array.isArray(n)?e.addEventListener(t,(e=>n[0](n[1],e))):e.addEventListener(t,n)}function q(e,t,n={}){const r=Object.keys(t),o=Object.keys(n);let i,s;for(i=0,s=o.length;i<s;i++){const r=o[i];r&&"undefined"!==r&&!(r in t)&&(Y(e,r,!1),delete n[r])}for(i=0,s=r.length;i<s;i++){const o=r[i],s=!!t[o];o&&"undefined"!==o&&n[o]!==s&&(Y(e,o,s),n[o]=s)}return t}function V(e,t,n={}){const r=e.style;if("string"==typeof t)return r.cssText=t;let o,i;for(i in"string"==typeof n&&(n={}),n)null==t[i]&&r.removeProperty(i),delete n[i];for(i in t)o=t[i],o!==n[i]&&(r.setProperty(i,o),n[i]=o);return n}function K(e,t,n,r){"function"==typeof t?f((o=>J(e,t(),o,n,r))):J(e,t,void 0,n,r)}function X(e,t,n,r){if(void 0===n||r||(r=[]),"function"!=typeof t)return Q(e,t,r,n);f((r=>Q(e,t(),r,n)),r)}function Y(e,t,n){const r=t.split(/\s+/);for(let t=0,o=r.length;t<o;t++)e.classList.toggle(r[t],n)}function Z(e){const t=`$$${e.type}`;let n=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==n&&Object.defineProperty(e,"target",{configurable:!0,value:n}),Object.defineProperty(e,"currentTarget",{configurable:!0,get:()=>n});null!==n;){const r=n[t];if(r){const o=n[`${t}Data`];if(void 0!==o?r(o,e):r(e),e.cancelBubble)return}n=n.host&&n.host!==n&&n.host instanceof Node?n.host:n.parentNode}}function J(e,t,n={},r,o){return!o&&"children"in t&&f((()=>n.children=Q(e,t.children,n.children))),f((()=>function(e,t,n,r,o={}){let i,s,a;for(const c in t){if("children"===c){r||Q(e,t.children);continue}const u=t[c];if(u!==o[c]){if("style"===c)V(e,u,o[c]);else if("class"!==c||n)if("classList"===c)q(e,u,o[c]);else if("ref"===c)u(e);else if("on:"===c.slice(0,3))e.addEventListener(c.slice(3),u);else if("oncapture:"===c.slice(0,10))e.addEventListener(c.slice(10),u,!0);else if("on"===c.slice(0,2)){const t=c.slice(2).toLowerCase(),n=P.has(t);W(e,t,u,n),n&&B([t])}else if((a=R.has(c))||!n&&(s=O.has(c))||(i=e.nodeName.includes("-")))!i||s||a?e[c]=u:e[(l=c,l.toLowerCase().replace(/-([a-z])/g,((e,t)=>t.toUpperCase())))]=u;else{const t=n&&c.indexOf(":")>-1&&H[c.split(":")[0]];t?G(e,t,c,u):U(e,M[c]||c,u)}else e.className=u;o[c]=u}}var l}(e,t,r,!0,n))),n}function Q(e,t,n,r,o){for(;"function"==typeof n;)n=n();if(t===n)return n;const i=typeof t,s=void 0!==r;if(e=s&&n[0]&&n[0].parentNode||e,"string"===i||"number"===i)if("number"===i&&(t=t.toString()),s){let o=n[0];o&&3===o.nodeType?o.data=t:o=document.createTextNode(t),n=ne(e,n,r,o)}else n=""!==n&&"string"==typeof n?e.firstChild.data=t:e.textContent=t;else if(null==t||"boolean"===i)n=ne(e,n,r);else{if("function"===i)return f((()=>{let o=t();for(;"function"==typeof o;)o=o();n=Q(e,o,n,r)})),()=>n;if(Array.isArray(t)){const i=[];if(ee(i,t,o))return f((()=>n=Q(e,i,n,r,!0))),()=>n;if(0===i.length){if(n=ne(e,n,r),s)return n}else Array.isArray(n)?0===n.length?te(e,i,r):F(e,n,i):null==n||""===n?te(e,i):F(e,s&&n||[e.firstChild],i);n=i}else if(t instanceof Node){if(Array.isArray(n)){if(s)return n=ne(e,n,r,t);ne(e,n,null,t)}else null!=n&&""!==n&&e.firstChild?e.replaceChild(t,e.firstChild):e.appendChild(t);n=t}else console.warn("Skipped inserting",t)}return n}function ee(e,t,n){let r=!1;for(let o=0,i=t.length;o<i;o++){let i,s=t[o];if(s instanceof Node)e.push(s);else if(null==s||!0===s||!1===s);else if(Array.isArray(s))r=ee(e,s)||r;else if("string"==(i=typeof s))e.push(document.createTextNode(s));else if("function"===i)if(n){for(;"function"==typeof s;)s=s();r=ee(e,Array.isArray(s)?s:[s])||r}else e.push(s),r=!0;else e.push(document.createTextNode(s.toString()))}return r}function te(e,t,n){for(let r=0,o=t.length;r<o;r++)e.insertBefore(t[r],n)}function ne(e,t,n,r){if(void 0===n)return e.textContent="";const o=r||document.createTextNode("");if(t.length){let r=!1;for(let i=t.length-1;i>=0;i--){const s=t[i];if(o!==s){const t=s.parentNode===e;r||i?t&&e.removeChild(s):t?e.replaceChild(o,s):e.insertBefore(o,n)}else r=!0}}else e.insertBefore(o,n);return[o]}class re{constructor(){this.providers=void 0,this.providers=[]}addProvider(t){const n=this.providers.findIndex((e=>t.priority>e.priority));return-1===n?this.providers.push(t):this.providers.splice(n,0,t),new e.Disposable((()=>{this.removeProvider(t)}))}removeProvider(e){const t=this.providers.indexOf(e);-1!==t&&this.providers.splice(t,1)}getProviderForEditor(e){const t=e.getGrammar().scopeName;return this.findProvider(t)}getAllProvidersForEditor(e){const t=e.getGrammar().scopeName;return this.findAllProviders(t)}findProvider(e){for(const t of this.findAllProviders(e))return t;return null}*findAllProviders(e){for(const t of this.providers)null!=t.grammarScopes&&-1===t.grammarScopes.indexOf(e)||(yield t)}}var oe=Object.hasOwnProperty,ie=Object.setPrototypeOf,se=Object.isFrozen,ae=Object.getPrototypeOf,le=Object.getOwnPropertyDescriptor,ce=Object.freeze,ue=Object.seal,de=Object.create,fe="undefined"!=typeof Reflect&&Reflect,pe=fe.apply,me=fe.construct;pe||(pe=function(e,t,n){return e.apply(t,n)}),ce||(ce=function(e){return e}),ue||(ue=function(e){return e}),me||(me=function(e,t){return new(Function.prototype.bind.apply(e,[null].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(t))))});var he,ge=Ee(Array.prototype.forEach),ve=Ee(Array.prototype.pop),ye=Ee(Array.prototype.push),be=Ee(String.prototype.toLowerCase),we=Ee(String.prototype.match),Te=Ee(String.prototype.replace),Ae=Ee(String.prototype.indexOf),Se=Ee(String.prototype.trim),xe=Ee(RegExp.prototype.test),Ne=(he=TypeError,function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return me(he,t)});function Ee(e){return function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return pe(e,t,r)}}function ke(e,t){ie&&ie(e,null);for(var n=t.length;n--;){var r=t[n];if("string"==typeof r){var o=be(r);o!==r&&(se(t)||(t[n]=o),r=o)}e[r]=!0}return e}function Ce(e){var t=de(null),n=void 0;for(n in e)pe(oe,e,[n])&&(t[n]=e[n]);return t}function De(e,t){for(;null!==e;){var n=le(e,t);if(n){if(n.get)return Ee(n.get);if("function"==typeof n.value)return Ee(n.value)}e=ae(e)}return function(e){return console.warn("fallback value for",e),null}}var Le=ce(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),_e=ce(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Oe=ce(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Re=ce(["animate","color-profile","cursor","discard","fedropshadow","feimage","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Me=ce(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),Pe=ce(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),He=ce(["#text"]),$e=ce(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),Fe=ce(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Ie=ce(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),ze=ce(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),je=ue(/\{\{[\s\S]*|[\s\S]*\}\}/gm),Be=ue(/<%[\s\S]*|[\s\S]*%>/gm),Ue=ue(/^data-[\-\w.\u00B7-\uFFFF]/),Ge=ue(/^aria-[\-\w]+$/),We=ue(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),qe=ue(/^(?:\w+script|data):/i),Ve=ue(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function Xe(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var Ye=function(){return"undefined"==typeof window?null:window},Ze=function(e,t){if("object"!==(void 0===e?"undefined":Ke(e))||"function"!=typeof e.createPolicy)return null;var n=null,r="data-tt-policy-suffix";t.currentScript&&t.currentScript.hasAttribute(r)&&(n=t.currentScript.getAttribute(r));var o="dompurify"+(n?"#"+n:"");try{return e.createPolicy(o,{createHTML:function(e){return e}})}catch(e){return console.warn("TrustedTypes policy "+o+" could not be created."),null}};var Je=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ye(),n=function(t){return e(t)};if(n.version="2.2.9",n.removed=[],!t||!t.document||9!==t.document.nodeType)return n.isSupported=!1,n;var r=t.document,o=t.document,i=t.DocumentFragment,s=t.HTMLTemplateElement,a=t.Node,l=t.Element,c=t.NodeFilter,u=t.NamedNodeMap,d=void 0===u?t.NamedNodeMap||t.MozNamedAttrMap:u,f=t.Text,p=t.Comment,m=t.DOMParser,h=t.trustedTypes,g=l.prototype,v=De(g,"cloneNode"),y=De(g,"nextSibling"),b=De(g,"childNodes"),w=De(g,"parentNode");if("function"==typeof s){var T=o.createElement("template");T.content&&T.content.ownerDocument&&(o=T.content.ownerDocument)}var A=Ze(h,r),S=A&&ee?A.createHTML(""):"",x=o,N=x.implementation,E=x.createNodeIterator,k=x.createDocumentFragment,C=r.importNode,D={};try{D=Ce(o).documentMode?o.documentMode:{}}catch(e){}var L={};n.isSupported="function"==typeof w&&N&&void 0!==N.createHTMLDocument&&9!==D;var _=je,O=Be,R=Ue,M=Ge,P=qe,H=Ve,$=We,F=null,I=ke({},[].concat(Xe(Le),Xe(_e),Xe(Oe),Xe(Me),Xe(He))),z=null,j=ke({},[].concat(Xe($e),Xe(Fe),Xe(Ie),Xe(ze))),B=null,U=null,G=!0,W=!0,q=!1,V=!1,K=!1,X=!1,Y=!1,Z=!1,J=!1,Q=!0,ee=!1,te=!0,ne=!0,re=!1,oe={},ie=ke({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),se=null,ae=ke({},["audio","video","img","source","image","track"]),le=null,ue=ke({},["alt","class","for","id","label","name","pattern","placeholder","summary","title","value","style","xmlns"]),de="http://www.w3.org/1998/Math/MathML",fe="http://www.w3.org/2000/svg",pe="http://www.w3.org/1999/xhtml",me=pe,he=!1,Ee=null,Je=o.createElement("form"),Qe=function(e){Ee&&Ee===e||(e&&"object"===(void 0===e?"undefined":Ke(e))||(e={}),e=Ce(e),F="ALLOWED_TAGS"in e?ke({},e.ALLOWED_TAGS):I,z="ALLOWED_ATTR"in e?ke({},e.ALLOWED_ATTR):j,le="ADD_URI_SAFE_ATTR"in e?ke(Ce(ue),e.ADD_URI_SAFE_ATTR):ue,se="ADD_DATA_URI_TAGS"in e?ke(Ce(ae),e.ADD_DATA_URI_TAGS):ae,B="FORBID_TAGS"in e?ke({},e.FORBID_TAGS):{},U="FORBID_ATTR"in e?ke({},e.FORBID_ATTR):{},oe="USE_PROFILES"in e&&e.USE_PROFILES,G=!1!==e.ALLOW_ARIA_ATTR,W=!1!==e.ALLOW_DATA_ATTR,q=e.ALLOW_UNKNOWN_PROTOCOLS||!1,V=e.SAFE_FOR_TEMPLATES||!1,K=e.WHOLE_DOCUMENT||!1,Z=e.RETURN_DOM||!1,J=e.RETURN_DOM_FRAGMENT||!1,Q=!1!==e.RETURN_DOM_IMPORT,ee=e.RETURN_TRUSTED_TYPE||!1,Y=e.FORCE_BODY||!1,te=!1!==e.SANITIZE_DOM,ne=!1!==e.KEEP_CONTENT,re=e.IN_PLACE||!1,$=e.ALLOWED_URI_REGEXP||$,me=e.NAMESPACE||pe,V&&(W=!1),J&&(Z=!0),oe&&(F=ke({},[].concat(Xe(He))),z=[],!0===oe.html&&(ke(F,Le),ke(z,$e)),!0===oe.svg&&(ke(F,_e),ke(z,Fe),ke(z,ze)),!0===oe.svgFilters&&(ke(F,Oe),ke(z,Fe),ke(z,ze)),!0===oe.mathMl&&(ke(F,Me),ke(z,Ie),ke(z,ze))),e.ADD_TAGS&&(F===I&&(F=Ce(F)),ke(F,e.ADD_TAGS)),e.ADD_ATTR&&(z===j&&(z=Ce(z)),ke(z,e.ADD_ATTR)),e.ADD_URI_SAFE_ATTR&&ke(le,e.ADD_URI_SAFE_ATTR),ne&&(F["#text"]=!0),K&&ke(F,["html","head","body"]),F.table&&(ke(F,["tbody"]),delete B.tbody),ce&&ce(e),Ee=e)},et=ke({},["mi","mo","mn","ms","mtext"]),tt=ke({},["foreignobject","desc","title","annotation-xml"]),nt=ke({},_e);ke(nt,Oe),ke(nt,Re);var rt=ke({},Me);ke(rt,Pe);var ot=function(e){var t=w(e);t&&t.tagName||(t={namespaceURI:pe,tagName:"template"});var n=be(e.tagName),r=be(t.tagName);if(e.namespaceURI===fe)return t.namespaceURI===pe?"svg"===n:t.namespaceURI===de?"svg"===n&&("annotation-xml"===r||et[r]):Boolean(nt[n]);if(e.namespaceURI===de)return t.namespaceURI===pe?"math"===n:t.namespaceURI===fe?"math"===n&&tt[r]:Boolean(rt[n]);if(e.namespaceURI===pe){if(t.namespaceURI===fe&&!tt[r])return!1;if(t.namespaceURI===de&&!et[r])return!1;var o=ke({},["title","style","font","a","script"]);return!rt[n]&&(o[n]||!nt[n])}return!1},it=function(e){ye(n.removed,{element:e});try{e.parentNode.removeChild(e)}catch(t){try{e.outerHTML=S}catch(t){e.remove()}}},st=function(e,t){try{ye(n.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){ye(n.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e&&!z[e])if(Z||J)try{it(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}},at=function(e){var t=void 0,n=void 0;if(Y)e="<remove></remove>"+e;else{var r=we(e,/^[\r\n\t ]+/);n=r&&r[0]}var i=A?A.createHTML(e):e;if(me===pe)try{t=(new m).parseFromString(i,"text/html")}catch(e){}if(!t||!t.documentElement){t=N.createDocument(me,"template",null);try{t.documentElement.innerHTML=he?"":i}catch(e){}}var s=t.body||t.documentElement;return e&&n&&s.insertBefore(o.createTextNode(n),s.childNodes[0]||null),K?t.documentElement:s},lt=function(e){return E.call(e.ownerDocument||e,e,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT,null,!1)},ct=function(e){return!(e instanceof f||e instanceof p)&&!("string"==typeof e.nodeName&&"string"==typeof e.textContent&&"function"==typeof e.removeChild&&e.attributes instanceof d&&"function"==typeof e.removeAttribute&&"function"==typeof e.setAttribute&&"string"==typeof e.namespaceURI&&"function"==typeof e.insertBefore)},ut=function(e){return"object"===(void 0===a?"undefined":Ke(a))?e instanceof a:e&&"object"===(void 0===e?"undefined":Ke(e))&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},dt=function(e,t,r){L[e]&&ge(L[e],(function(e){e.call(n,t,r,Ee)}))},ft=function(e){var t=void 0;if(dt("beforeSanitizeElements",e,null),ct(e))return it(e),!0;if(we(e.nodeName,/[\u0080-\uFFFF]/))return it(e),!0;var r=be(e.nodeName);if(dt("uponSanitizeElement",e,{tagName:r,allowedTags:F}),!ut(e.firstElementChild)&&(!ut(e.content)||!ut(e.content.firstElementChild))&&xe(/<[/\w]/g,e.innerHTML)&&xe(/<[/\w]/g,e.textContent))return it(e),!0;if(!F[r]||B[r]){if(ne&&!ie[r]){var o=w(e)||e.parentNode,i=b(e)||e.childNodes;if(i&&o)for(var s=i.length-1;s>=0;--s)o.insertBefore(v(i[s],!0),y(e))}return it(e),!0}return e instanceof l&&!ot(e)?(it(e),!0):"noscript"!==r&&"noembed"!==r||!xe(/<\/no(script|embed)/i,e.innerHTML)?(V&&3===e.nodeType&&(t=e.textContent,t=Te(t,_," "),t=Te(t,O," "),e.textContent!==t&&(ye(n.removed,{element:e.cloneNode()}),e.textContent=t)),dt("afterSanitizeElements",e,null),!1):(it(e),!0)},pt=function(e,t,n){if(te&&("id"===t||"name"===t)&&(n in o||n in Je))return!1;if(W&&xe(R,t));else if(G&&xe(M,t));else{if(!z[t]||U[t])return!1;if(le[t]);else if(xe($,Te(n,H,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==Ae(n,"data:")||!se[e]){if(q&&!xe(P,Te(n,H,"")));else if(n)return!1}else;}return!0},mt=function(e){var t=void 0,r=void 0,o=void 0,i=void 0;dt("beforeSanitizeAttributes",e,null);var s=e.attributes;if(s){var a={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:z};for(i=s.length;i--;){var l=t=s[i],c=l.name,u=l.namespaceURI;if(r=Se(t.value),o=be(c),a.attrName=o,a.attrValue=r,a.keepAttr=!0,a.forceKeepAttr=void 0,dt("uponSanitizeAttribute",e,a),r=a.attrValue,!a.forceKeepAttr&&(st(c,e),a.keepAttr))if(xe(/\/>/i,r))st(c,e);else{V&&(r=Te(r,_," "),r=Te(r,O," "));var d=e.nodeName.toLowerCase();if(pt(d,o,r))try{u?e.setAttributeNS(u,c,r):e.setAttribute(c,r),ve(n.removed)}catch(e){}}}dt("afterSanitizeAttributes",e,null)}},ht=function e(t){var n=void 0,r=lt(t);for(dt("beforeSanitizeShadowDOM",t,null);n=r.nextNode();)dt("uponSanitizeShadowNode",n,null),ft(n)||(n.content instanceof i&&e(n.content),mt(n));dt("afterSanitizeShadowDOM",t,null)};return n.sanitize=function(e,o){var s=void 0,l=void 0,c=void 0,u=void 0,d=void 0;if((he=!e)&&(e="\x3c!--\x3e"),"string"!=typeof e&&!ut(e)){if("function"!=typeof e.toString)throw Ne("toString is not a function");if("string"!=typeof(e=e.toString()))throw Ne("dirty is not a string, aborting")}if(!n.isSupported){if("object"===Ke(t.toStaticHTML)||"function"==typeof t.toStaticHTML){if("string"==typeof e)return t.toStaticHTML(e);if(ut(e))return t.toStaticHTML(e.outerHTML)}return e}if(X||Qe(o),n.removed=[],"string"==typeof e&&(re=!1),re);else if(e instanceof a)1===(l=(s=at("\x3c!----\x3e")).ownerDocument.importNode(e,!0)).nodeType&&"BODY"===l.nodeName||"HTML"===l.nodeName?s=l:s.appendChild(l);else{if(!Z&&!V&&!K&&-1===e.indexOf("<"))return A&&ee?A.createHTML(e):e;if(!(s=at(e)))return Z?null:S}s&&Y&&it(s.firstChild);for(var f=lt(re?e:s);c=f.nextNode();)3===c.nodeType&&c===u||ft(c)||(c.content instanceof i&&ht(c.content),mt(c),u=c);if(u=null,re)return e;if(Z){if(J)for(d=k.call(s.ownerDocument);s.firstChild;)d.appendChild(s.firstChild);else d=s;return Q&&(d=C.call(r,d,!0)),d}var p=K?s.outerHTML:s.innerHTML;return V&&(p=Te(p,_," "),p=Te(p,O," ")),A&&ee?A.createHTML(p):p},n.setConfig=function(e){Qe(e),X=!0},n.clearConfig=function(){Ee=null,X=!1},n.isValidAttribute=function(e,t,n){Ee||Qe({});var r=be(e),o=be(t);return pt(r,o,n)},n.addHook=function(e,t){"function"==typeof t&&(L[e]=L[e]||[],ye(L[e],t))},n.removeHook=function(e){L[e]&&ve(L[e])},n.removeHooks=function(e){L[e]&&(L[e]=[])},n.removeAllHooks=function(){L={}},n}();let Qe;async function et(){return Qe||(Qe=(await Promise.resolve().then((function(){return require("./renderer-24339d41.js")}))).render),Qe}const tt=j("<div><div></div></div>",4);function nt(e){const[t,n]=d("");return m((async()=>{var t;n(null!==(t=await async function(e,t=(()=>{var e,t;return null===(e=atom.workspace.getActiveTextEditor())||void 0===e||null===(t=e.getGrammar().scopeName)||void 0===t?void 0:t.toLowerCase()})()||"",n){if(void 0===e)return null;let r="";if(Array.isArray(e)){if(0===e.length)return null;r=e.join("\r\n")}else r=e;if(n)return Je.sanitize(await n.render(r,t));return(await et())(r,t)}(e.markdown,e.grammarName,e.renderer))&&void 0!==t?t:"")})),(()=>{const n=tt.cloneNode(!0),r=n.firstChild;return n.addEventListener("wheel",rt),f((o=>{const i=e.containerClassName,s=e.contentClassName,a=t();return i!==o._v$&&(n.className=o._v$=i),s!==o._v$2&&(r.className=o._v$2=s),a!==o._v$3&&(r.innerHTML=o._v$3=a),o}),{_v$:void 0,_v$2:void 0,_v$3:void 0}),n})()}function rt(e){return e.stopPropagation()}const ot=j("<div><div></div></div>",4);function it(e){const[t,n]=d("");return m((async()=>{var t;n(null!==(t=await async function(e,t=(()=>{var e,t;return null===(e=atom.workspace.getActiveTextEditor())||void 0===e||null===(t=e.getGrammar().scopeName)||void 0===t?void 0:t.toLowerCase()})()||"",n){if(void 0===e)return null;let r=e;"string"==typeof r&&(r=[r]);if(Array.isArray(r)){if(0===r.length)return null;const e=r.map((e=>`\`\`\`\n${e.replace(at,"").replace(lt,"")}\n\`\`\``)).join("\n");if(n)return Je.sanitize(await n.render(e,t));return(await et())(e,t)}return null}(e.snippet,e.grammarName,e.renderer))&&void 0!==t?t:"")})),(()=>{const n=ot.cloneNode(!0),r=n.firstChild;return n.addEventListener("wheel",st),f((o=>{const i=e.containerClassName,s=e.contentClassName,a=t();return i!==o._v$&&(n.className=o._v$=i),s!==o._v$2&&(r.className=o._v$2=s),a!==o._v$3&&(r.innerHTML=o._v$3=a),o}),{_v$:void 0,_v$2:void 0,_v$3:void 0}),n})()}function st(e){return e.stopPropagation()}const at=/^\s*<([!?])([a-z]+)?\s*/i,lt=/^\((method|property|parameter|alias)\)\W/;const ct=j("<div></div>",2);let ut;function dt(e){void 0===ut&&(ut=require("react-dom").render);const t=document.createElement("div");return t.className=e.contentClassName,(()=>{const n=ct.cloneNode(!0);return X(n,(()=>ut(e.component(),t)||void 0)),f((()=>n.className=e.containerClassName)),n})()}const ft=j("<div></div>",2),pt=Object.freeze({PIN:"PIN",CLOSE:"CLOSE"}),mt={[pt.PIN]:"pin",[pt.CLOSE]:"x"};function ht(e){return(()=>{const t=ft.cloneNode(!0);return K(t,(()=>e.onMouseDown),!1,!0),K(t,(()=>e.onClickCapture),!1,!0),X(t,(()=>{const t=$((()=>void 0!==e.component),!0);return()=>t()?C(dt,_(e.component,{})):void 0})(),null),X(t,(()=>{const t=$((()=>void 0!==e.snippet),!0);return()=>t()?C(it,_(e.snippet,{})):void 0})(),null),X(t,(()=>{const t=$((()=>void 0!==e.markdown),!0);return()=>t()?C(nt,_(e.markdown,{})):void 0})(),null),X(t,(()=>{const t=$((()=>void 0!==e.action),!0);return()=>t()?(()=>{const t=ft.cloneNode(!0);return t.$$click=()=>{var t;null===(t=e.onActionClick)||void 0===t||t.call(e,event)},f((n=>{const r=`datatip-pin-button icon-${mt[e.action]}`,o=e.actionTitle;return r!==n._v$&&(t.className=n._v$=r),o!==n._v$2&&U(t,"title",n._v$2=o),n}),{_v$:void 0,_v$2:void 0}),t})():void 0})(),null),f((()=>{var n;return t.className=null!==(n=e.className)&&void 0!==n?n:"datatip-element"})),t})()}function gt(e,t,n=!0){t.setAttribute("tabindex","-1"),t.style.userSelect&&"none"!==t.style.userSelect||(t.style.userSelect="text"),n&&function(e,t){const n=atom.views.getView(e).getComponent();t.addEventListener("mousedown",(()=>{!function(e){null==e||e.didBlurHiddenInput({relatedTarget:null})}(n),t.addEventListener("mouseleave",(()=>{!function(e){null==e||e.didFocus()}(n)}))}))}(e,t),t.classList.add("native-key-bindings")}B(["click"]);class vt{constructor(){this.subscriptions=new e.CompositeDisposable,this.providerRegistry=new re,this.watchedEditors=new WeakSet,this.editor=null,this.editorView=null,this.editorSubscriptions=new e.CompositeDisposable,this.signatureHelpDisposables=new e.CompositeDisposable,this.showSignatureHelpOnTyping=!0}initialize(){this.subscriptions.add(atom.workspace.observeTextEditors((e=>{const t=this.watchEditor(e);e.onDidDestroy((()=>null==t?void 0:t.dispose()))})),atom.commands.add("atom-text-editor",{"signature-help:show":async e=>{const t=e.currentTarget.getModel();if(atom.workspace.isTextEditor(t)){const e=this.providerRegistry.getProviderForEditor(t),n=t.getLastCursor().getBufferPosition();e&&await this.showSignatureHelp(e,t,n)}}}),atom.config.observe("atom-ide-signature-help.showSignatureHelpOnTyping",(e=>{this.showSignatureHelpOnTyping=e;const t=this.editor;this.editor=null,this.updateCurrentEditor(t)})))}dispose(){this.signatureHelpDisposables.dispose(),this.editorSubscriptions.dispose(),this.subscriptions.dispose()}get signatureHelpRegistry(){return e=>this.providerRegistry.addProvider(e)}watchEditor(t){if(this.watchedEditors.has(t))return;const n=atom.views.getView(t);n.hasFocus()&&this.updateCurrentEditor(t);const r=()=>this.updateCurrentEditor(t);n.addEventListener("focus",r);const o=()=>this.unmountDataTip();n.addEventListener("blur",o);const i=new e.Disposable((()=>{n.removeEventListener("focus",r),n.removeEventListener("blur",o),this.editor===t&&this.updateCurrentEditor(null)}));return this.watchedEditors.add(t),this.subscriptions.add(i),new e.Disposable((()=>{i.dispose(),this.subscriptions.remove(i),this.watchedEditors.delete(t)}))}updateCurrentEditor(t){if(t===this.editor)return;if(this.editorSubscriptions.dispose(),this.unmountDataTip(),this.editor=null,this.editorView=null,!t||!atom.workspace.isTextEditor(t))return;if(this.editor=t,this.editorView=atom.views.getView(this.editor),this.editorSubscriptions=new e.CompositeDisposable,!this.showSignatureHelpOnTyping)return;this.editor.getElement().addEventListener("keydown",(e=>{"Escape"===e.key&&this.unmountDataTip()})),this.editorSubscriptions.add(this.editor.getBuffer().onDidChangeText((async e=>{var n;if(1!==e.changes.length)return;const r=e.changes[0],o=t.getSelectedBufferRange().start;if(0===r.newText.length||r.newRange.start.row!==r.newRange.end.row||!r.newRange.containsPoint(o))return this.unmountDataTip();const i=Math.max(0,o.column-r.newRange.start.column-1),s=this.providerRegistry.getProviderForEditor(t);s&&!0===(null===(n=s.triggerCharacters)||void 0===n?void 0:n.has(r.newText[i]))&&await this.showSignatureHelp(s,t,o)})))}async showSignatureHelp(t,n,r){try{const s=await t.getSignatureHelp(n,r);if(s&&0!==s.signatures.length){var o,i;const t=null!==(o=s.activeSignature)&&void 0!==o?o:0,a=s.signatures[t],l=null!==(i=s.activeParameter)&&void 0!==i?i:0,c=void 0!==a.parameters?a.parameters[l]:null;this.unmountDataTip();let u="";if(c){let e="";void 0===c.documentation||null===c.documentation||("string"==typeof c.documentation?e=c.documentation:"string"==typeof c.documentation.value&&(e=c.documentation.value)),u=`<b>${c.label}</b> ${e}`}else if(null!==a.documentation&&void 0!==a.documentation){let e="";"string"==typeof a.documentation?e=a.documentation:"string"==typeof a.documentation.value&&(e=a.documentation.value),u=e}const d=n.getGrammar().scopeName.toLowerCase(),f=document.createElement("div");f.className="signature-element",z((()=>C(ht,{get snippet(){return{snippet:a.label,grammarName:d,containerClassName:"signature-snippet-container",contentClassName:"signature-snippet"}},markdown:{markdown:u,grammarName:d,containerClassName:"signature-markdown-container",contentClassName:"signature-markdown"}})),f),this.signatureHelpDisposables=function(t,n,r){const o=new e.CompositeDisposable,i=t.markBufferRange(new e.Range(n,n),{invalidate:"overlap"});gt(t,r);const s=t.decorateMarker(i,{type:"overlay",class:"signature-overlay",position:"head",item:r});return setTimeout((()=>{const e=r.parentElement;if(!e)return;const o=r.getBoundingClientRect().height,i=t.getLineHeightInPixels();if(o<(n.row-t.getFirstVisibleScreenRow())*i+80)e.style.transform=`translateY(-${i+o}px)`;else{const n=t.getElement().querySelector("autocomplete-suggestion-list");e.style.transform=n?`translateX(${n.clientWidth}px)`:"translateX(300px)"}r.style.visibility="visible"}),100),o.add(new e.Disposable((()=>i.destroy())),new e.Disposable((()=>s.destroy()))),o}(n,r,f)}else this.unmountDataTip()}catch(e){console.error(e)}}unmountDataTip(){this.signatureHelpDisposables.dispose()}}const yt=new e.CompositeDisposable;let bt;exports.activate=function(){bt=new vt,yt.add(bt),async function(){atom.packages.isPackageLoaded("busy-signal")||await(await Promise.resolve().then((function(){return require("./index-4c99303f.js")})).then((function(e){return e.index}))).install("atom-ide-signature-help",!0)}().then((()=>{bt.initialize()})).catch((e=>{atom.notifications.addError(e)}))},exports.config={showSignatureHelpOnTyping:{title:"Show signature automatically",description:"If set to true, the signature help is shown as soon as you start typing. Otherwise you will have to activate it via keypress.",type:"boolean",default:!0}},exports.deactivate=function(){yt.dispose()},exports.provideSignatureHelp=function(){return bt.signatureHelpRegistry};
//# sourceMappingURL=main.js.map
