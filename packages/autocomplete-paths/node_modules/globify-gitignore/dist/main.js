"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("path"),r=require("fs"),e=function(t){if("string"!=typeof t||""===t)return!1;for(var r;r=/(\\).|([@?!+*]\(.*\))/g.exec(t);){if(r[2])return!0;t=t.slice(r.index+r[0].length)}return!1},n={"{":"}","(":")","[":"]"},i=/\\(.)|(^!|\*|[\].+)]\?|\[[^\\\]]+\]|\{[^\\}]+\}|\(\?[:!=][^\\)]+\)|\([^|]+\|[^\\)]+\))/,o=/\\(.)|(^!|[*?{}()[\]]|\(\?)/,s=function(t,r){if("string"!=typeof t||""===t)return!1;if(e(t))return!0;var s,a=i;for(r&&!1===r.strict&&(a=o);s=a.exec(t);){if(s[2])return!0;var u=s.index+s[0].length,c=s[1],f=c?n[c]:null;if(c&&f){var l=t.indexOf(f,u);-1!==l&&(u=l+1)}t=t.slice(u)}return!1},a=/[‘“!#$%&+^<=>`]/,u=function(t){return"string"!=typeof t||s(t)||a.test(t)},c=function(t){return!1===u(t)};var f={exports:({},function(t){var r=void 0;r="string"==typeof t?[t]:t.raw;for(var e="",n=0;n<r.length;n++)e+=r[n].replace(/\\\n[ \t]*/g,"").replace(/\\`/g,"`"),n<(arguments.length<=1?0:arguments.length-1)&&(e+=arguments.length<=n+1?void 0:arguments[n+1]);var i=e.split("\n"),o=null;return i.forEach((function(t){var r=t.match(/^(\s+)\S+/);if(r){var e=r[1].length;o=o?Math.min(o,e):e}})),null!==o&&(e=i.map((function(t){return" "===t[0]?t.slice(o):t})).join("\n")),(e=e.trim()).replace(/\\n/g,"\n")})},l=f.exports;const{readFile:p,stat:g}=r.promises;function h(r){return t.normalize(r).replace(/\\/g,"/")}function y(t){return h(t).replace(/\/$/,"")}async function x(t,r){const e=l(t).split("\n").filter((t=>{return!(/^\s*$/.test(t)||(r=t,"#"===r[0]));var r})).map((t=>function(t){return t.replace(/^\s+/,"")}(function(t){return/\\\s+$/.test(t)?t.replace(/\\(\s+)$/,"$1"):t.replace(/\s+$/,"")}(t)))),n=e.length,i=new Array(n);for(let t=0;t<n;t++){const n=await v(e[t],r);"string"==typeof n?i[t]=n:(i[t]=n[0],i.push(n[1]))}return[...new Set(i)]}async function v(r,e){let n=r,i=!1;"!"===n[0]&&(n=n.substring(1),i=!0);let o=E.OTHER;if("/"===n[0])n=n.substring(1),c(n)&&(o=await R(e?t.join(e,n):n));else{const r=n.indexOf("/");-1===r?n.startsWith("**/")||(n=`**/${n}`):r===n.length-1?o=E.DIRECTORY:c(n)&&(o=await R(e?t.join(e,n):n))}return e&&(n=`${h(e)}/${n}`),n=i?n:`!${n}`,o===E.DIRECTORY?n.endsWith("/")?`${n}**`:`${n}/**`:o===E.FILE||n.endsWith("/**")?n:[n,`${n}/**`]}var E;async function R(t){let r;try{r=await g(t)}catch(t){return E.OTHER}return r.isDirectory()?E.DIRECTORY:r.isFile()?E.FILE:E.OTHER}!function(t){t[t.OTHER=0]="OTHER",t[t.DIRECTORY=1]="DIRECTORY",t[t.FILE=2]="FILE"}(E||(E={})),exports.globifyDirectory=function(t){return`${y(t)}/**`},exports.globifyGitIgnore=x,exports.globifyGitIgnoreFile=async function(r){return x(await p(t.join(r,".gitignore"),"utf-8"),r)},exports.globifyPath=function(t,r=process.cwd()){return v(h(t),r)},exports.posixifyPath=h,exports.posixifyPathNormalized=y;
//# sourceMappingURL=main.js.map
